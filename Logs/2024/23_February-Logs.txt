2024-02-23 14:26:32.9195 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 14:26:33.0791 Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 14:26:33.1028 Execution plan of authorization filters (in the following order): None
2024-02-23 14:26:33.1028 Execution plan of resource filters (in the following order): None
2024-02-23 14:26:33.1028 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 14:26:33.1028 Execution plan of exception filters (in the following order): None
2024-02-23 14:26:33.1028 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 14:26:33.1143 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 14:26:33.1143 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 14:26:33.1143 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 14:26:33.1143 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 14:26:33.1143 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 14:26:33.1143 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 14:26:33.1371 Executing action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 14:26:33.6973 An 'IServiceProvider' was created for internal use by Entity Framework.
2024-02-23 14:26:35.4115 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:35.8144 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:35.8429 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:35.8429 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.4955 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.4955 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.4955 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.5198 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.5884 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:36.5884 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 14:26:39.7559 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 14:26:40.1126 Compiling query expression: 
'DbSet<User>()'
2024-02-23 14:26:41.6243 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedBy (long) Required, 1], [Property: User.CreatedDate (DateTime) Required, 2], [Property: User.Email (string) MaxLength(255), 3], [Property: User.IsActive (bool) Required, 4], [Property: User.IsDeleted (bool) Required, 5], [Property: User.Name (string) MaxLength(255), 6], [Property: User.UpdatedBy (long?), 7], [Property: User.UpdatedDate (DateTime?), 8], [Property: User.UserId (long) Required, 9] }
        SELECT u.Id, u.CreatedBy, u.CreatedDate, u.Email, u.IsActive, u.IsDeleted, u.Name, u.UpdatedBy, u.UpdatedDate, u.UserId
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 14:26:41.9150 Creating DbCommand for 'ExecuteReader'.
2024-02-23 14:26:41.9150 Creating DbConnection.
2024-02-23 14:26:42.3200 Created DbConnection. (382ms).
2024-02-23 14:26:42.3689 Created DbCommand for 'ExecuteReader' (439ms).
2024-02-23 14:26:42.3689 Initialized DbCommand for 'ExecuteReader' (472ms).
2024-02-23 14:26:42.4004 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 14:26:43.9386 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 14:26:43.9878 Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 14:26:44.1972 Executed DbCommand (207ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 14:26:44.2693 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 14:26:44.2952 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 76ms reading results.
2024-02-23 14:26:44.3137 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 14:26:44.3520 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (35ms).
2024-02-23 14:26:44.4611 Executed action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11310.9975ms.
2024-02-23 14:26:44.4611 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 14:26:44.4611 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 14:26:44.4611 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 14:26:44.4611 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 14:26:44.4723 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 14:26:44.4723 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 14:26:44.4723 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 14:26:44.4723 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 14:26:44.4936 No information found on request to perform content negotiation.
2024-02-23 14:26:44.4936 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 14:26:44.4936 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 14:26:44.5055 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 14:26:44.5055 Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserInteraction_Application.Dtos.Users.GetUserDto, UserInteraction_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-02-23 14:26:44.5418 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 14:26:44.5418 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 14:26:44.5418 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 14:26:44.5581 Executed action UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) in 11434.291ms
2024-02-23 14:26:44.5581 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 14:26:44.5769 Connection id "0HN1K8SH5K9OS" completed keep alive response.
2024-02-23 14:26:44.5875 'UserInteractionDbContext' disposed.
2024-02-23 14:26:44.6060 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 14:26:44.6127 Disposed connection to database '' on server '' (5ms).
2024-02-23 14:26:47.6665 Connection id "0HN1K8SH5K9OS" received FIN.
2024-02-23 14:26:47.6665 Connection id "0HN1K8SH5K9OS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 14:26:47.6665 Connection id "0HN1K8SH5K9OS" disconnecting.
2024-02-23 14:26:47.6665 Connection id "0HN1K8SH5K9OS" stopped.
2024-02-23 15:07:29.5091 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 15:07:29.7847 Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 15:07:29.8402 Execution plan of authorization filters (in the following order): None
2024-02-23 15:07:29.8402 Execution plan of resource filters (in the following order): None
2024-02-23 15:07:29.8402 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 15:07:29.8402 Execution plan of exception filters (in the following order): None
2024-02-23 15:07:29.8402 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 15:07:29.8402 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:07:29.8580 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:07:29.8580 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:07:29.8711 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:07:29.8711 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:07:29.8711 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:07:29.8964 Executing action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 15:07:30.7427 An 'IServiceProvider' was created for internal use by Entity Framework.
2024-02-23 15:07:33.2344 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:33.7378 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:33.7660 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:33.7660 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.6142 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.6285 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.6285 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.6708 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.8092 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:34.8092 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 15:07:38.1276 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 15:07:38.4808 Compiling query expression: 
'DbSet<User>()'
2024-02-23 15:07:39.6974 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedBy (long) Required, 1], [Property: User.CreatedDate (DateTime) Required, 2], [Property: User.Email (string) MaxLength(255), 3], [Property: User.IsActive (bool) Required, 4], [Property: User.IsDeleted (bool) Required, 5], [Property: User.Name (string) MaxLength(255), 6], [Property: User.UpdatedBy (long?), 7], [Property: User.UpdatedDate (DateTime?), 8], [Property: User.UserId (long) Required, 9] }
        SELECT u.Id, u.CreatedBy, u.CreatedDate, u.Email, u.IsActive, u.IsDeleted, u.Name, u.UpdatedBy, u.UpdatedDate, u.UserId
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 15:07:39.9597 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:07:39.9731 Creating DbConnection.
2024-02-23 15:07:40.2768 Created DbConnection. (291ms).
2024-02-23 15:07:40.3432 Created DbCommand for 'ExecuteReader' (382ms).
2024-02-23 15:07:40.3580 Initialized DbCommand for 'ExecuteReader' (427ms).
2024-02-23 15:07:40.4235 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:07:42.4229 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:07:42.4632 Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 15:07:42.8424 Executed DbCommand (316ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 15:07:42.9301 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:07:42.9719 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 95ms reading results.
2024-02-23 15:07:42.9925 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:07:43.0241 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (31ms).
2024-02-23 15:07:43.1897 Executed action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13263.6774ms.
2024-02-23 15:07:43.1897 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:07:43.1897 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:07:43.1897 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:07:43.1897 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:07:43.2096 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:07:43.2096 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:07:43.2165 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:07:43.2165 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 15:07:43.2406 No information found on request to perform content negotiation.
2024-02-23 15:07:43.2406 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 15:07:43.2406 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 15:07:43.2486 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 15:07:43.2486 Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserInteraction_Application.Dtos.Users.GetUserDto, UserInteraction_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-02-23 15:07:43.3190 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:07:43.3190 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:07:43.3190 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:07:43.4071 Executed action UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) in 13478.047ms
2024-02-23 15:07:43.4071 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 15:07:43.4420 Connection id "0HN1KARDTVJT6" completed keep alive response.
2024-02-23 15:07:43.4516 'UserInteractionDbContext' disposed.
2024-02-23 15:07:43.5210 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:07:43.5300 Disposed connection to database '' on server '' (59ms).
2024-02-23 15:07:49.7680 Connection id "0HN1KARDTVJT6" received FIN.
2024-02-23 15:07:49.7680 Connection id "0HN1KARDTVJT6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:07:49.7680 Connection id "0HN1KARDTVJT6" disconnecting.
2024-02-23 15:07:49.7680 Connection id "0HN1KARDTVJT6" stopped.
2024-02-23 15:08:50.0571 Connection id "0HN1KARDTVJT7" accepted.
2024-02-23 15:08:50.1902 Connection id "0HN1KARDTVJT7" started.
2024-02-23 15:08:50.2443 Request starting HTTP/1.1 POST http://localhost:5107/api/User/Add application/json 65
2024-02-23 15:08:50.2469 All hosts are allowed.
2024-02-23 15:08:50.2726 1 candidate(s) found for the request path '/api/User/Add'
2024-02-23 15:08:50.2726 Endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)' with route pattern 'api/User/Add' is valid for the request path '/api/User/Add'
2024-02-23 15:08:50.2726 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:08:50.2832 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:08:50.2832 The request has an origin header: 'http://localhost:5107'.
2024-02-23 15:08:50.2832 CORS policy execution failed.
2024-02-23 15:08:50.2832 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 15:08:50.3453 Successfully validated the token.
2024-02-23 15:08:50.3453 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:08:50.3453 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:08:50.3453 Authorization was successful.
2024-02-23 15:08:50.5443 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:08:50.6308 Route matched with {action = "Add", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Users.AddUpdateUserDto) on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 15:08:50.6308 Execution plan of authorization filters (in the following order): None
2024-02-23 15:08:50.6308 Execution plan of resource filters (in the following order): None
2024-02-23 15:08:50.6308 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 15:08:50.6308 Execution plan of exception filters (in the following order): None
2024-02-23 15:08:50.6308 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 15:08:50.6308 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:08:50.6308 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:08:50.6504 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' ...
2024-02-23 15:08:50.6995 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' using the name '' in request data ...
2024-02-23 15:08:50.7143 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 15:08:50.7545 Connection id "0HN1KARDTVJT7", Request id "0HN1KARDTVJT7:00000001": started reading request body.
2024-02-23 15:08:50.7545 Connection id "0HN1KARDTVJT7", Request id "0HN1KARDTVJT7:00000001": done reading request body.
2024-02-23 15:08:50.8155 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'
2024-02-23 15:08:50.8155 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:08:50.8155 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:08:50.8155 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' ...
2024-02-23 15:08:50.8378 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:08:50.8535 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:08:50.8535 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:08:50.8535 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:08:50.8535 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:08:50.8535 Executing action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 15:08:50.8535 Executing action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Users.AddUpdateUserDto)
2024-02-23 15:08:51.0129 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 15:08:51.1001 Compiling query expression: 
'DbSet<User>()
    .Any(x => x.Email.ToLower() == __ToLower_0)'
2024-02-23 15:08:51.8185 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE LOWER(u.Email) == @__ToLower_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 15:08:52.0374 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:08:52.0374 Creating DbConnection.
2024-02-23 15:08:52.0374 Created DbConnection. (2ms).
2024-02-23 15:08:52.0374 Created DbCommand for 'ExecuteReader' (3ms).
2024-02-23 15:08:52.0765 Initialized DbCommand for 'ExecuteReader' (38ms).
2024-02-23 15:08:52.0765 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:52.0765 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:52.0984 Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Email]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 15:08:52.3719 Executed DbCommand (238ms) [Parameters=[@__ToLower_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Email]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 15:08:52.5808 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:52.5808 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 212ms reading results.
2024-02-23 15:08:52.5808 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:52.5808 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:08:52.9139 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."User"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:08:53.5293 Context 'UserInteractionDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:08:53.5459 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 15:08:53.5459 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 15:08:53.6707 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 15:08:54.1326 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:54.1326 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:54.1532 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:08:54.1532 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:08:54.1532 Initialized DbCommand for 'ExecuteReader' (9ms).
2024-02-23 15:08:54.1532 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (DbType = Int64), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Email], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 15:08:54.4684 Executed DbCommand (272ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (DbType = Int64), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Email], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 15:08:54.5561 The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 15:08:54.5978 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:54.5978 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 129ms reading results.
2024-02-23 15:08:54.5978 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:54.5978 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:08:54.6656 An entity of type 'User' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:08:54.6769 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 15:08:54.6769 Executed action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3826.9891ms.
2024-02-23 15:08:54.6769 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:08:54.6769 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:08:54.6769 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:08:54.6769 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:08:54.6769 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:08:54.6769 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:08:54.6837 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:08:54.6837 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 15:08:54.6837 No information found on request to perform content negotiation.
2024-02-23 15:08:54.6837 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 15:08:54.6837 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 15:08:54.6837 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 15:08:54.6837 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 15:08:54.7040 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:08:54.7040 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:08:54.7040 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:08:54.7040 Executed action UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) in 4073.7071ms
2024-02-23 15:08:54.7040 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:08:54.7040 Connection id "0HN1KARDTVJT7" completed keep alive response.
2024-02-23 15:08:54.7040 'UserInteractionDbContext' disposed.
2024-02-23 15:08:54.7040 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:08:54.7040 Disposed connection to database '' on server '' (1ms).
2024-02-23 15:08:54.7040 Request finished HTTP/1.1 POST http://localhost:5107/api/User/Add application/json 65 - 200 - application/json;+charset=utf-8 4514.8695ms
2024-02-23 15:08:59.8853 Connection id "0HN1KARDTVJT7" received FIN.
2024-02-23 15:08:59.8853 Connection id "0HN1KARDTVJT7" disconnecting.
2024-02-23 15:08:59.8853 Connection id "0HN1KARDTVJT7" stopped.
2024-02-23 15:08:59.9231 Connection id "0HN1KARDTVJT7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:09:15.6714 Connection id "0HN1KARDTVJT8" accepted.
2024-02-23 15:09:15.6714 Connection id "0HN1KARDTVJT8" started.
2024-02-23 15:09:15.6714 Request starting HTTP/1.1 POST http://localhost:5107/api/User/Add application/json 62
2024-02-23 15:09:15.6714 All hosts are allowed.
2024-02-23 15:09:15.6714 1 candidate(s) found for the request path '/api/User/Add'
2024-02-23 15:09:15.6714 Endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)' with route pattern 'api/User/Add' is valid for the request path '/api/User/Add'
2024-02-23 15:09:15.6714 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:09:15.6714 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:09:15.6714 The request has an origin header: 'http://localhost:5107'.
2024-02-23 15:09:15.6714 CORS policy execution failed.
2024-02-23 15:09:15.6714 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 15:09:15.6872 Successfully validated the token.
2024-02-23 15:09:15.6872 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:15.6872 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:15.6872 Authorization was successful.
2024-02-23 15:09:15.6872 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:09:15.6872 Route matched with {action = "Add", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Users.AddUpdateUserDto) on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 15:09:15.6872 Execution plan of authorization filters (in the following order): None
2024-02-23 15:09:15.6872 Execution plan of resource filters (in the following order): None
2024-02-23 15:09:15.6872 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 15:09:15.6872 Execution plan of exception filters (in the following order): None
2024-02-23 15:09:15.6872 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 15:09:15.6872 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:15.7013 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:15.7013 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' ...
2024-02-23 15:09:15.7013 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' using the name '' in request data ...
2024-02-23 15:09:15.7013 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 15:09:15.7013 Connection id "0HN1KARDTVJT8", Request id "0HN1KARDTVJT8:00000001": started reading request body.
2024-02-23 15:09:15.7013 Connection id "0HN1KARDTVJT8", Request id "0HN1KARDTVJT8:00000001": done reading request body.
2024-02-23 15:09:15.7013 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'
2024-02-23 15:09:15.7013 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:09:15.7013 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:09:15.7013 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto' ...
2024-02-23 15:09:15.7013 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Users.AddUpdateUserDto'.
2024-02-23 15:09:15.7013 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:15.7013 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:15.7013 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:15.7013 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:15.7013 Executing action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 15:09:15.7013 Executing action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Users.AddUpdateUserDto)
2024-02-23 15:09:16.1036 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 15:09:16.1258 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:09:16.1258 Creating DbConnection.
2024-02-23 15:09:16.1258 Created DbConnection. (0ms).
2024-02-23 15:09:16.1258 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:16.1258 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:16.1258 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1258 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1258 Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Email]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 15:09:16.1685 Executed DbCommand (30ms) [Parameters=[@__ToLower_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Email]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 15:09:16.1685 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1685 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 1ms reading results.
2024-02-23 15:09:16.1685 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1685 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:09:16.1685 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."User"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:16.1869 Context 'UserInteractionDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:16.1869 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 15:09:16.1869 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 15:09:16.1869 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 15:09:16.1869 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1869 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.1869 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:09:16.1869 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:16.1869 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:16.1869 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (DbType = Int64), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Email], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 15:09:16.2249 Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (DbType = Int64), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Email], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 15:09:16.2249 The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 15:09:16.2249 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.2249 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 3ms reading results.
2024-02-23 15:09:16.2249 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.2249 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:09:16.2319 An entity of type 'User' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:16.2319 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 15:09:16.2319 Executed action method UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 522.2451ms.
2024-02-23 15:09:16.2319 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:16.2319 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:16.2319 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:16.2319 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:16.2319 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:16.2319 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:16.2319 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:16.2319 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 15:09:16.2319 No information found on request to perform content negotiation.
2024-02-23 15:09:16.2319 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 15:09:16.2319 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 15:09:16.2319 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 15:09:16.2319 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 15:09:16.2319 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:16.2319 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:16.2319 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:16.2319 Executed action UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi) in 535.6844ms
2024-02-23 15:09:16.2319 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.Add (UserInteraction_WebApi)'
2024-02-23 15:09:16.2319 Connection id "0HN1KARDTVJT8" completed keep alive response.
2024-02-23 15:09:16.2319 'UserInteractionDbContext' disposed.
2024-02-23 15:09:16.2319 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:16.2319 Disposed connection to database '' on server '' (0ms).
2024-02-23 15:09:16.2319 Request finished HTTP/1.1 POST http://localhost:5107/api/User/Add application/json 62 - 200 - application/json;+charset=utf-8 559.4263ms
2024-02-23 15:09:22.7891 Request starting HTTP/1.1 GET http://localhost:5107/api/User/GetAll - -
2024-02-23 15:09:22.7891 All hosts are allowed.
2024-02-23 15:09:22.7891 1 candidate(s) found for the request path '/api/User/GetAll'
2024-02-23 15:09:22.7891 Endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)' with route pattern 'api/User/GetAll' is valid for the request path '/api/User/GetAll'
2024-02-23 15:09:22.7891 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 15:09:22.7891 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:09:22.7891 Successfully validated the token.
2024-02-23 15:09:22.7891 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:22.7891 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:22.7891 Authorization was successful.
2024-02-23 15:09:22.7970 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 15:09:22.7970 Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 15:09:22.7970 Execution plan of authorization filters (in the following order): None
2024-02-23 15:09:22.7970 Execution plan of resource filters (in the following order): None
2024-02-23 15:09:22.7970 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 15:09:22.7970 Execution plan of exception filters (in the following order): None
2024-02-23 15:09:22.7970 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 15:09:22.7970 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:22.7970 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:22.7970 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:22.7970 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:22.7970 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:22.7970 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:22.7970 Executing action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 15:09:22.7970 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 15:09:22.7970 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:09:22.7970 Creating DbConnection.
2024-02-23 15:09:22.7970 Created DbConnection. (0ms).
2024-02-23 15:09:22.7970 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:22.7970 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:22.7970 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:22.7970 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:22.7970 Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 15:09:22.8465 Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
2024-02-23 15:09:22.8948 Context 'UserInteractionDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:22.8948 Context 'UserInteractionDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:22.8948 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:22.8948 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 52ms reading results.
2024-02-23 15:09:22.8948 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:22.8948 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:09:22.9028 Executed action method UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.565ms.
2024-02-23 15:09:22.9028 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:22.9028 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:22.9028 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:22.9028 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:22.9028 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:22.9028 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:22.9028 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:22.9028 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 15:09:22.9028 No information found on request to perform content negotiation.
2024-02-23 15:09:22.9028 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 15:09:22.9028 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 15:09:22.9028 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 15:09:22.9028 Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserInteraction_Application.Dtos.Users.GetUserDto, UserInteraction_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-02-23 15:09:22.9028 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:22.9028 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:22.9028 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:22.9028 Executed action UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi) in 116.2016ms
2024-02-23 15:09:22.9028 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.GetAll (UserInteraction_WebApi)'
2024-02-23 15:09:22.9028 Connection id "0HN1KARDTVJT8" completed keep alive response.
2024-02-23 15:09:22.9028 'UserInteractionDbContext' disposed.
2024-02-23 15:09:22.9028 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:22.9028 Disposed connection to database '' on server '' (0ms).
2024-02-23 15:09:22.9028 Request finished HTTP/1.1 GET http://localhost:5107/api/User/GetAll - - - 200 - application/json;+charset=utf-8 127.3447ms
2024-02-23 15:09:24.8976 Connection id "0HN1KARDTVJT8" received FIN.
2024-02-23 15:09:24.8976 Connection id "0HN1KARDTVJT8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:09:24.8976 Connection id "0HN1KARDTVJT8" disconnecting.
2024-02-23 15:09:24.8976 Connection id "0HN1KARDTVJT8" stopped.
2024-02-23 15:09:30.5851 Connection id "0HN1KARDTVJT9" accepted.
2024-02-23 15:09:30.5851 Connection id "0HN1KARDTVJT9" started.
2024-02-23 15:09:30.5851 Request starting HTTP/1.1 GET http://localhost:5107/api/User/GetById?Id=1 - -
2024-02-23 15:09:30.5851 All hosts are allowed.
2024-02-23 15:09:30.5851 1 candidate(s) found for the request path '/api/User/GetById'
2024-02-23 15:09:30.5851 Endpoint 'UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi)' with route pattern 'api/User/GetById' is valid for the request path '/api/User/GetById'
2024-02-23 15:09:30.5851 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi)'
2024-02-23 15:09:30.5851 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:09:30.5851 Successfully validated the token.
2024-02-23 15:09:30.5851 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:30.5903 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:09:30.5903 Authorization was successful.
2024-02-23 15:09:30.5903 Executing endpoint 'UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi)'
2024-02-23 15:09:30.6202 Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int64) on controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi).
2024-02-23 15:09:30.6202 Execution plan of authorization filters (in the following order): None
2024-02-23 15:09:30.6202 Execution plan of resource filters (in the following order): None
2024-02-23 15:09:30.6202 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)
2024-02-23 15:09:30.6202 Execution plan of exception filters (in the following order): None
2024-02-23 15:09:30.6202 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 15:09:30.6210 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:30.6210 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserController (UserInteraction_WebApi)
2024-02-23 15:09:30.6407 Attempting to bind parameter 'Id' of type 'System.Int64' ...
2024-02-23 15:09:30.6407 Attempting to bind parameter 'Id' of type 'System.Int64' using the name 'Id' in request data ...
2024-02-23 15:09:30.6561 Done attempting to bind parameter 'Id' of type 'System.Int64'.
2024-02-23 15:09:30.6561 Done attempting to bind parameter 'Id' of type 'System.Int64'.
2024-02-23 15:09:30.6561 Attempting to validate the bound parameter 'Id' of type 'System.Int64' ...
2024-02-23 15:09:30.6561 Done attempting to validate the bound parameter 'Id' of type 'System.Int64'.
2024-02-23 15:09:30.6561 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:30.6561 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:30.6561 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:30.6561 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:30.6561 Executing action method UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 15:09:30.6561 Executing action method UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi) with arguments (1)
2024-02-23 15:09:30.6887 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 15:09:30.6887 Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(x => x.Id == __Id_0)'
2024-02-23 15:09:30.7197 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedBy (long) Required, 1], [Property: User.CreatedDate (DateTime) Required, 2], [Property: User.Email (string) MaxLength(255), 3], [Property: User.IsActive (bool) Required, 4], [Property: User.IsDeleted (bool) Required, 5], [Property: User.Name (string) MaxLength(255), 6], [Property: User.UpdatedBy (long?), 7], [Property: User.UpdatedDate (DateTime?), 8], [Property: User.UserId (long) Required, 9] }
            SELECT TOP(1) u.Id, u.CreatedBy, u.CreatedDate, u.Email, u.IsActive, u.IsDeleted, u.Name, u.UpdatedBy, u.UpdatedDate, u.UserId
            FROM Users AS u
            WHERE u.Id == @__Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 15:09:30.7197 Creating DbCommand for 'ExecuteReader'.
2024-02-23 15:09:30.7197 Creating DbConnection.
2024-02-23 15:09:30.7197 Created DbConnection. (0ms).
2024-02-23 15:09:30.7197 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:30.7197 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 15:09:30.7197 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:30.7197 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:30.7197 Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__Id_0
2024-02-23 15:09:30.7537 Executed DbCommand (9ms) [Parameters=[@__Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[Email], [u].[IsActive], [u].[IsDeleted], [u].[Name], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__Id_0
2024-02-23 15:09:30.7537 Context 'UserInteractionDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 15:09:30.7761 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:30.7761 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 21ms reading results.
2024-02-23 15:09:30.7761 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:30.7761 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 15:09:30.7876 Executed action method UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 129.0173ms.
2024-02-23 15:09:30.7876 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:30.7876 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 15:09:30.7876 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:30.7876 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 15:09:30.7876 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:30.7876 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:30.7876 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:30.7876 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 15:09:30.7876 No information found on request to perform content negotiation.
2024-02-23 15:09:30.7876 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 15:09:30.7876 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 15:09:30.7876 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 15:09:30.7876 Executing OkObjectResult, writing value of type 'UserInteraction_Application.Dtos.Users.GetUserDto'.
2024-02-23 15:09:30.7876 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 15:09:30.7876 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:30.7876 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 15:09:30.7876 Executed action UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi) in 167.9756ms
2024-02-23 15:09:30.7876 Executed endpoint 'UserInteraction_WebApi.Controllers.UserController.GetById (UserInteraction_WebApi)'
2024-02-23 15:09:30.7876 Connection id "0HN1KARDTVJT9" completed keep alive response.
2024-02-23 15:09:30.7876 'UserInteractionDbContext' disposed.
2024-02-23 15:09:30.7876 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 15:09:30.7876 Disposed connection to database '' on server '' (0ms).
2024-02-23 15:09:30.7876 Request finished HTTP/1.1 GET http://localhost:5107/api/User/GetById?Id=1 - - - 200 - application/json;+charset=utf-8 202.9006ms
2024-02-23 15:09:34.9150 Connection id "0HN1KARDTVJT9" received FIN.
2024-02-23 15:09:34.9150 Connection id "0HN1KARDTVJT9" disconnecting.
2024-02-23 15:09:34.9150 Connection id "0HN1KARDTVJT9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:09:34.9190 Connection id "0HN1KARDTVJT9" stopped.
2024-02-23 15:10:44.3672 Connection id "0HN1KARDTVJTA" accepted.
2024-02-23 15:10:44.3719 Connection id "0HN1KARDTVJTA" started.
2024-02-23 15:10:44.3719 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 15:10:44.3719 All hosts are allowed.
2024-02-23 15:10:44.3719 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 15:10:44.3719 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 15:10:44.3719 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:10:44.3719 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:10:44.3719 CORS policy execution successful.
2024-02-23 15:10:44.3719 The request is a preflight request.
2024-02-23 15:10:44.3986 Connection id "0HN1KARDTVJTA" completed keep alive response.
2024-02-23 15:10:44.3986 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 25.5190ms
2024-02-23 15:10:44.4101 Connection id "0HN1KARDTVJTB" accepted.
2024-02-23 15:10:44.4101 Connection id "0HN1KARDTVJTB" started.
2024-02-23 15:10:44.4101 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 15:10:44.4101 All hosts are allowed.
2024-02-23 15:10:44.4101 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 15:10:44.4101 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 15:10:44.4101 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:10:44.4101 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:10:44.4101 CORS policy execution successful.
2024-02-23 15:10:44.4101 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 15:10:45.7109 An unhandled exception has occurred while executing the request.
2024-02-23 15:10:45.7262 Connection id "0HN1KARDTVJTB" completed keep alive response.
2024-02-23 15:10:45.7262 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 500 - text/plain;+charset=utf-8 1311.6550ms
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTA" received FIN.
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTB" received FIN.
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTA" disconnecting.
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTB" disconnecting.
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTB" stopped.
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:10:50.5038 Connection id "0HN1KARDTVJTA" stopped.
2024-02-23 15:46:51.8325 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 15:46:51.9414 New connection ZlXEPCGjkGEV-owJ3tK9Hg created.
2024-02-23 15:46:51.9839 Sending negotiation response.
2024-02-23 15:46:51.9839 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 15:46:51.9839 Connection id "0HN1KB76C9IA6" completed keep alive response.
2024-02-23 15:46:52.0027 Connection id "0HN1KB76C9IA7" accepted.
2024-02-23 15:46:52.0027 Connection id "0HN1KB76C9IA7" started.
2024-02-23 15:46:52.0121 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=4AeOxz0hD8hciNlccOCmsg&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiI3NzM0ZmE0Yi1lNGQ2LTQ1YzgtODA5Ny04Y2VjNzQwMDE4YTciLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NjkzNjEwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.dM7bepnSP9H4hX5IxIHusux60San697WsQEFzOvF8VI - -
2024-02-23 15:46:52.0121 All hosts are allowed.
2024-02-23 15:46:52.0121 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 15:46:52.0121 Request matched endpoint '/ConnectionHub'
2024-02-23 15:46:52.0278 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:46:52.0278 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:46:52.0278 CORS policy execution successful.
2024-02-23 15:46:52.0437 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 15:46:52.0882 Executing endpoint '/ConnectionHub'
2024-02-23 15:46:52.1032 Establishing new connection.
2024-02-23 15:46:52.1032 OnConnectedAsync started.
2024-02-23 15:46:52.1421 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 15:46:52.1801 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 15:46:52.1902 Found protocol implementation for requested protocol: json.
2024-02-23 15:46:52.1988 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 15:46:52.2222 Sending payload: 3 bytes.
2024-02-23 15:46:52.2590 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:46:52.2590 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 15:46:52.2771 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 15:46:52.3035 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 15:46:52.3115 Sending payload: 64 bytes.
2024-02-23 15:47:07.4713 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:47:07.9925 Sent a ping message to the client.
2024-02-23 15:47:07.9931 Sending payload: 11 bytes.
2024-02-23 15:47:23.3607 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:47:23.9667 Sent a ping message to the client.
2024-02-23 15:47:23.9667 Sending payload: 11 bytes.
2024-02-23 15:47:39.3589 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:47:39.9650 Sent a ping message to the client.
2024-02-23 15:47:39.9650 Sending payload: 11 bytes.
2024-02-23 15:47:55.3573 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:47:55.9645 Sent a ping message to the client.
2024-02-23 15:47:55.9645 Sending payload: 11 bytes.
2024-02-23 15:48:11.3697 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:48:11.9696 Sent a ping message to the client.
2024-02-23 15:48:11.9696 Sending payload: 11 bytes.
2024-02-23 15:48:27.3707 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:48:27.9675 Sent a ping message to the client.
2024-02-23 15:48:27.9675 Sending payload: 11 bytes.
2024-02-23 15:48:43.3670 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:48:43.9652 Sent a ping message to the client.
2024-02-23 15:48:43.9652 Sending payload: 11 bytes.
2024-02-23 15:48:59.3646 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:48:59.9686 Sent a ping message to the client.
2024-02-23 15:48:59.9686 Sending payload: 11 bytes.
2024-02-23 15:49:15.3531 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:49:15.9719 Sent a ping message to the client.
2024-02-23 15:49:15.9719 Sending payload: 11 bytes.
2024-02-23 15:49:31.3611 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:49:31.9648 Sent a ping message to the client.
2024-02-23 15:49:31.9648 Sending payload: 11 bytes.
2024-02-23 15:49:47.3515 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:49:47.9732 Sent a ping message to the client.
2024-02-23 15:49:47.9732 Sending payload: 11 bytes.
2024-02-23 15:50:02.3511 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:50:03.9746 Sent a ping message to the client.
2024-02-23 15:50:03.9746 Sending payload: 11 bytes.
2024-02-23 15:50:18.3568 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:50:19.9636 Sent a ping message to the client.
2024-02-23 15:50:19.9636 Sending payload: 11 bytes.
2024-02-23 15:50:34.3587 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:50:35.9630 Sent a ping message to the client.
2024-02-23 15:50:35.9630 Sending payload: 11 bytes.
2024-02-23 15:50:50.3608 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:50:51.9717 Sent a ping message to the client.
2024-02-23 15:50:51.9717 Sending payload: 11 bytes.
2024-02-23 15:51:06.3694 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:51:07.9747 Sent a ping message to the client.
2024-02-23 15:51:07.9747 Sending payload: 11 bytes.
2024-02-23 15:51:22.3566 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:51:23.9657 Sent a ping message to the client.
2024-02-23 15:51:23.9657 Sending payload: 11 bytes.
2024-02-23 15:51:38.3638 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:51:39.9691 Sent a ping message to the client.
2024-02-23 15:51:39.9691 Sending payload: 11 bytes.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA5" received FIN.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA6" received FIN.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA6" disconnecting.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA5" disconnecting.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA5" stopped.
2024-02-23 15:51:52.3667 Connection id "0HN1KB76C9IA6" stopped.
2024-02-23 15:51:54.3607 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:51:55.9667 Sending payload: 11 bytes.
2024-02-23 15:51:55.9667 Sent a ping message to the client.
2024-02-23 15:52:10.3522 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:52:11.9591 Sent a ping message to the client.
2024-02-23 15:52:11.9591 Sending payload: 11 bytes.
2024-02-23 15:52:26.3510 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:52:27.9624 Sent a ping message to the client.
2024-02-23 15:52:27.9624 Sending payload: 11 bytes.
2024-02-23 15:52:42.3588 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:52:43.9675 Sent a ping message to the client.
2024-02-23 15:52:43.9675 Sending payload: 11 bytes.
2024-02-23 15:52:58.3631 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:52:59.9728 Sent a ping message to the client.
2024-02-23 15:52:59.9728 Sending payload: 11 bytes.
2024-02-23 15:53:14.3552 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:53:15.9604 Sending payload: 11 bytes.
2024-02-23 15:53:15.9604 Sent a ping message to the client.
2024-02-23 15:53:30.3591 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:53:31.9663 Sent a ping message to the client.
2024-02-23 15:53:31.9663 Sending payload: 11 bytes.
2024-02-23 15:53:46.3499 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:53:47.9673 Sent a ping message to the client.
2024-02-23 15:53:47.9673 Sending payload: 11 bytes.
2024-02-23 15:54:02.3491 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:54:03.9658 Sent a ping message to the client.
2024-02-23 15:54:03.9658 Sending payload: 11 bytes.
2024-02-23 15:54:18.3574 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:54:19.9583 Sent a ping message to the client.
2024-02-23 15:54:19.9583 Sending payload: 11 bytes.
2024-02-23 15:54:34.3547 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:54:35.9583 Sent a ping message to the client.
2024-02-23 15:54:35.9583 Sending payload: 11 bytes.
2024-02-23 15:54:50.3532 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:54:51.9619 Sent a ping message to the client.
2024-02-23 15:54:51.9619 Sending payload: 11 bytes.
2024-02-23 15:55:06.3528 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:55:07.9692 Sent a ping message to the client.
2024-02-23 15:55:07.9692 Sending payload: 11 bytes.
2024-02-23 15:55:22.3564 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:55:23.3749 Connection id "0HN1KB76C9IA8" accepted.
2024-02-23 15:55:23.3749 Connection id "0HN1KB76C9IA8" started.
2024-02-23 15:55:23.3785 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66
2024-02-23 15:55:23.3785 All hosts are allowed.
2024-02-23 15:55:23.3785 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 15:55:23.3785 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 15:55:23.3785 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:55:23.3785 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:55:23.3785 The request has an origin header: 'http://localhost:5107'.
2024-02-23 15:55:23.3785 CORS policy execution failed.
2024-02-23 15:55:23.3785 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 15:55:23.3971 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 15:55:23.3971 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 15:55:23.4220 Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-02-23 15:55:23.4412 AuthenticationScheme: Bearer was challenged.
2024-02-23 15:55:23.4412 Connection id "0HN1KB76C9IA8" completed keep alive response.
2024-02-23 15:55:23.4412 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66 - 401 0 - 63.5748ms
2024-02-23 15:55:23.4412 Connection id "0HN1KB76C9IA8", Request id "0HN1KB76C9IA8:00000001": started reading request body.
2024-02-23 15:55:23.4412 Connection id "0HN1KB76C9IA8", Request id "0HN1KB76C9IA8:00000001": done reading request body.
2024-02-23 15:55:23.9640 Sending payload: 11 bytes.
2024-02-23 15:55:23.9640 Sent a ping message to the client.
2024-02-23 15:55:38.3483 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:55:39.9655 Sent a ping message to the client.
2024-02-23 15:55:39.9655 Sending payload: 11 bytes.
2024-02-23 15:55:49.8978 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66
2024-02-23 15:55:49.8978 All hosts are allowed.
2024-02-23 15:55:49.8978 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 15:55:49.8978 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 15:55:49.8978 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:55:49.8978 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:55:49.8978 The request has an origin header: 'http://localhost:5107'.
2024-02-23 15:55:49.8978 CORS policy execution failed.
2024-02-23 15:55:49.8978 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 15:55:50.8676 Successfully validated the token.
2024-02-23 15:55:50.8779 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:55:50.8779 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:55:50.8779 Authorization was successful.
2024-02-23 15:55:50.8963 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:55:50.9275 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:55:52.1600 No service for type 'CommonService.Filters.TokenToUserIdActionFilter' has been registered.
2024-02-23 15:55:52.1833 No service for type 'CommonService.Filters.TokenToUserIdActionFilter' has been registered.
2024-02-23 15:55:52.1974 Connection id "0HN1KB76C9IA8" completed keep alive response.
2024-02-23 15:55:52.1974 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66 - 500 - application/json 2300.0026ms
2024-02-23 15:55:52.1974 Connection id "0HN1KB76C9IA8", Request id "0HN1KB76C9IA8:00000002": started reading request body.
2024-02-23 15:55:52.1974 Connection id "0HN1KB76C9IA8", Request id "0HN1KB76C9IA8:00000002": done reading request body.
2024-02-23 15:55:54.3501 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:55:55.9625 Sent a ping message to the client.
2024-02-23 15:55:55.9625 Sending payload: 11 bytes.
2024-02-23 15:56:10.3566 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:56:11.9658 Sent a ping message to the client.
2024-02-23 15:56:11.9658 Sending payload: 11 bytes.
2024-02-23 15:56:26.3523 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:56:27.0141 Sent a ping message to the client.
2024-02-23 15:56:27.0141 Sending payload: 11 bytes.
2024-02-23 15:56:42.3567 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:56:42.9624 Sent a ping message to the client.
2024-02-23 15:56:42.9624 Sending payload: 11 bytes.
2024-02-23 15:56:46.7228 Request starting HTTP/1.1 GET http://localhost:5107/swagger/index.html - -
2024-02-23 15:56:46.7228 Connection id "0HN1KB76C9IA9" accepted.
2024-02-23 15:56:46.7228 Connection id "0HN1KB76C9IA9" started.
2024-02-23 15:56:46.7818 All hosts are allowed.
2024-02-23 15:56:46.7838 No candidates found for the request path '/swagger/index.html'
2024-02-23 15:56:46.7838 Request did not match any endpoints
2024-02-23 15:56:46.8277 Response markup is scheduled to include browser refresh script injection.
2024-02-23 15:56:46.8277 Response markup was updated to include browser refresh script injection.
2024-02-23 15:56:46.8277 Connection id "0HN1KB76C9IA8" completed keep alive response.
2024-02-23 15:56:46.8277 Request finished HTTP/1.1 GET http://localhost:5107/swagger/index.html - - - 200 - text/html;charset=utf-8 106.1924ms
2024-02-23 15:56:46.8666 Request starting HTTP/1.1 GET http://localhost:5107/_vs/browserLink - -
2024-02-23 15:56:46.8666 Request starting HTTP/1.1 GET http://localhost:5107/_framework/aspnetcore-browser-refresh.js - -
2024-02-23 15:56:46.8666 Connection id "0HN1KB76C9IA8" completed keep alive response.
2024-02-23 15:56:46.8666 Request finished HTTP/1.1 GET http://localhost:5107/_framework/aspnetcore-browser-refresh.js - - - 200 13780 application/javascript;+charset=utf-8 0.6026ms
2024-02-23 15:56:46.9429 Connection id "0HN1KB76C9IA9" completed keep alive response.
2024-02-23 15:56:46.9429 Request finished HTTP/1.1 GET http://localhost:5107/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 76.5677ms
2024-02-23 15:56:47.3400 Request starting HTTP/1.1 GET http://localhost:5107/swagger/v1/swagger.json - -
2024-02-23 15:56:47.3400 All hosts are allowed.
2024-02-23 15:56:47.3454 No candidates found for the request path '/swagger/v1/swagger.json'
2024-02-23 15:56:47.3454 Request did not match any endpoints
2024-02-23 15:56:47.3938 Connection id "0HN1KB76C9IA9" completed keep alive response.
2024-02-23 15:56:47.3938 Request finished HTTP/1.1 GET http://localhost:5107/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 54.0925ms
2024-02-23 15:56:58.3506 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:56:58.9579 Sent a ping message to the client.
2024-02-23 15:56:58.9579 Sending payload: 11 bytes.
2024-02-23 15:57:14.3486 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:57:14.9547 Sent a ping message to the client.
2024-02-23 15:57:14.9547 Sending payload: 11 bytes.
2024-02-23 15:57:30.3456 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:57:30.9670 Sent a ping message to the client.
2024-02-23 15:57:30.9670 Sending payload: 11 bytes.
2024-02-23 15:57:46.3440 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:57:46.9587 Sent a ping message to the client.
2024-02-23 15:57:46.9587 Sending payload: 11 bytes.
2024-02-23 15:58:02.3503 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:58:02.9569 Sent a ping message to the client.
2024-02-23 15:58:02.9569 Sending payload: 11 bytes.
2024-02-23 15:58:18.3497 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:58:18.9570 Sent a ping message to the client.
2024-02-23 15:58:18.9570 Sending payload: 11 bytes.
2024-02-23 15:58:34.3497 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:58:34.9581 Sent a ping message to the client.
2024-02-23 15:58:34.9581 Sending payload: 11 bytes.
2024-02-23 15:58:50.3448 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:58:50.9531 Sent a ping message to the client.
2024-02-23 15:58:50.9531 Sending payload: 11 bytes.
2024-02-23 15:59:06.3476 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:59:06.9553 Sent a ping message to the client.
2024-02-23 15:59:06.9553 Sending payload: 11 bytes.
2024-02-23 15:59:22.3507 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:59:22.9522 Sent a ping message to the client.
2024-02-23 15:59:22.9522 Sending payload: 11 bytes.
2024-02-23 15:59:34.2982 Connection id "0HN1KB76C9IAA" accepted.
2024-02-23 15:59:34.2982 Connection id "0HN1KB76C9IAA" started.
2024-02-23 15:59:34.2982 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 15:59:34.2982 All hosts are allowed.
2024-02-23 15:59:34.2982 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 15:59:34.2982 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 15:59:34.2982 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:59:34.2982 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:59:34.2982 CORS policy execution successful.
2024-02-23 15:59:34.2982 The request is a preflight request.
2024-02-23 15:59:34.2982 Connection id "0HN1KB76C9IAA" completed keep alive response.
2024-02-23 15:59:34.2982 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 1.9007ms
2024-02-23 15:59:34.2982 Connection id "0HN1KB76C9IAB" accepted.
2024-02-23 15:59:34.2982 Connection id "0HN1KB76C9IAB" started.
2024-02-23 15:59:34.2982 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 15:59:34.2982 All hosts are allowed.
2024-02-23 15:59:34.2982 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 15:59:34.2982 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 15:59:34.2982 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:59:34.2982 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:59:34.2982 CORS policy execution successful.
2024-02-23 15:59:34.2982 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 15:59:34.3125 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 15:59:34.3125 New connection imOdG1F-8zcTw4q3SJ1t0g created.
2024-02-23 15:59:34.3125 Sending negotiation response.
2024-02-23 15:59:34.3125 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 15:59:34.3125 Connection id "0HN1KB76C9IAB" completed keep alive response.
2024-02-23 15:59:34.3125 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 7.1899ms
2024-02-23 15:59:34.3125 Connection id "0HN1KB76C9IAC" accepted.
2024-02-23 15:59:34.3125 Connection id "0HN1KB76C9IAC" started.
2024-02-23 15:59:34.3125 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=6DJQhn9JzVry-GEpiQ8_2A&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiI3NzM0ZmE0Yi1lNGQ2LTQ1YzgtODA5Ny04Y2VjNzQwMDE4YTciLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NjkzNjEwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.dM7bepnSP9H4hX5IxIHusux60San697WsQEFzOvF8VI - -
2024-02-23 15:59:34.3125 All hosts are allowed.
2024-02-23 15:59:34.3125 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 15:59:34.3125 Request matched endpoint '/ConnectionHub'
2024-02-23 15:59:34.3125 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:59:34.3125 The request has an origin header: 'http://localhost:4200'.
2024-02-23 15:59:34.3125 CORS policy execution successful.
2024-02-23 15:59:34.3125 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 15:59:34.3286 Executing endpoint '/ConnectionHub'
2024-02-23 15:59:34.3286 Establishing new connection.
2024-02-23 15:59:34.3286 OnConnectedAsync started.
2024-02-23 15:59:34.3286 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 15:59:34.3286 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 15:59:34.3286 Found protocol implementation for requested protocol: json.
2024-02-23 15:59:34.3462 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 15:59:34.3462 Sending payload: 3 bytes.
2024-02-23 15:59:34.3462 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:59:34.3462 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 15:59:34.3462 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 15:59:34.3462 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 15:59:34.3595 Sending payload: 64 bytes.
2024-02-23 15:59:38.3586 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 15:59:38.9625 Sent a ping message to the client.
2024-02-23 15:59:38.9625 Sending payload: 11 bytes.
2024-02-23 15:59:39.7916 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66
2024-02-23 15:59:39.7916 All hosts are allowed.
2024-02-23 15:59:39.7916 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 15:59:39.7916 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 15:59:39.7916 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:59:39.7916 Static files was skipped as the request already matched an endpoint.
2024-02-23 15:59:39.7916 The request has an origin header: 'http://localhost:5107'.
2024-02-23 15:59:39.7916 CORS policy execution failed.
2024-02-23 15:59:39.7916 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 15:59:39.7916 Successfully validated the token.
2024-02-23 15:59:39.7967 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:59:39.7967 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 15:59:39.7967 Authorization was successful.
2024-02-23 15:59:39.7967 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:59:39.7967 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 15:59:40.3006 No service for type 'CommonService.Filters.TokenToUserIdActionFilter' has been registered.
2024-02-23 15:59:40.3368 No service for type 'CommonService.Filters.TokenToUserIdActionFilter' has been registered.
2024-02-23 15:59:40.3437 Connection id "0HN1KB76C9IA9" completed keep alive response.
2024-02-23 15:59:40.3437 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66 - 500 - application/json 552.5195ms
2024-02-23 15:59:40.3437 Connection id "0HN1KB76C9IA9", Request id "0HN1KB76C9IA9:00000003": started reading request body.
2024-02-23 15:59:40.3437 Connection id "0HN1KB76C9IA9", Request id "0HN1KB76C9IA9:00000003": done reading request body.
2024-02-23 15:59:49.9538 Sent a ping message to the client.
2024-02-23 15:59:49.9538 Sending payload: 11 bytes.
2024-02-23 15:59:50.3450 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:02:18.2140 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 16:02:18.3438 New connection CHZIrDGqgQ3HuQAl3ls1QA created.
2024-02-23 16:02:18.3846 Sending negotiation response.
2024-02-23 16:02:18.3846 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 16:02:18.3846 Connection id "0HN1KBQMBTVBC" completed keep alive response.
2024-02-23 16:02:18.4012 Connection id "0HN1KBQMBTVBD" accepted.
2024-02-23 16:02:18.4012 Connection id "0HN1KBQMBTVBD" started.
2024-02-23 16:02:18.4082 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=QorK8QD1HRtyurVyZsbb-g&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiI3NzM0ZmE0Yi1lNGQ2LTQ1YzgtODA5Ny04Y2VjNzQwMDE4YTciLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NjkzNjEwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.dM7bepnSP9H4hX5IxIHusux60San697WsQEFzOvF8VI - -
2024-02-23 16:02:18.4082 All hosts are allowed.
2024-02-23 16:02:18.4212 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 16:02:18.4212 Request matched endpoint '/ConnectionHub'
2024-02-23 16:02:18.4212 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:02:18.4212 The request has an origin header: 'http://localhost:4200'.
2024-02-23 16:02:18.4212 CORS policy execution successful.
2024-02-23 16:02:18.4366 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 16:02:18.5042 Executing endpoint '/ConnectionHub'
2024-02-23 16:02:18.5241 Establishing new connection.
2024-02-23 16:02:18.5471 OnConnectedAsync started.
2024-02-23 16:02:18.5725 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 16:02:18.6284 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 16:02:18.6415 Found protocol implementation for requested protocol: json.
2024-02-23 16:02:18.6618 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 16:02:18.6954 Sending payload: 3 bytes.
2024-02-23 16:02:18.7467 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:02:18.7467 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 16:02:18.7745 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 16:02:18.8145 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 16:02:18.8145 Sending payload: 64 bytes.
2024-02-23 16:02:22.4536 Connection id "0HN1KBQMBTVBE" accepted.
2024-02-23 16:02:22.4536 Connection id "0HN1KBQMBTVBE" started.
2024-02-23 16:02:22.4536 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66
2024-02-23 16:02:22.4536 All hosts are allowed.
2024-02-23 16:02:22.4536 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 16:02:22.4691 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 16:02:22.4691 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:02:22.4691 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:02:22.4691 The request has an origin header: 'http://localhost:5107'.
2024-02-23 16:02:22.4691 CORS policy execution failed.
2024-02-23 16:02:22.4691 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 16:02:23.4877 Successfully validated the token.
2024-02-23 16:02:23.4877 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:02:23.5076 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:02:23.5350 Authorization was successful.
2024-02-23 16:02:23.5350 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:02:23.6697 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 16:02:23.6766 Execution plan of authorization filters (in the following order): None
2024-02-23 16:02:23.6766 Execution plan of resource filters (in the following order): None
2024-02-23 16:02:23.6766 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:02:23.6766 Execution plan of exception filters (in the following order): None
2024-02-23 16:02:23.6766 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:02:23.6864 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 16:02:23.8031 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 16:02:23.8165 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 16:02:23.8165 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 16:02:23.8298 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 16:02:23.8716 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000001": started reading request body.
2024-02-23 16:02:23.8716 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000001": done reading request body.
2024-02-23 16:02:23.9091 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 16:02:23.9091 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 16:02:23.9091 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 16:02:23.9091 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 16:02:23.9375 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 16:02:23.9375 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:02:23.9375 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:02:23.9375 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:02:23.9375 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:02:23.9375 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:02:23.9743 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:02:23.9743 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 16:02:24.8875 An 'IServiceProvider' was created for internal use by Entity Framework.
2024-02-23 16:02:26.7509 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.1453 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.1713 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.1713 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.8267 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.8267 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.8267 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.8564 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.9354 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:27.9371 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 16:02:29.8905 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:02:30.2415 Compiling query expression: 
'DbSet<BlockedUser>()
    .Where(x => !(x.IsBlockedInGroup) && x.BlockedById == __userId_0 && x.BlockedUserId == __model_ReceiverId_1 || x.BlockedById == __model_ReceiverId_1 && x.BlockedUserId == __userId_0)'
2024-02-23 16:02:31.2386 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<BlockedUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: BlockedUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: BlockedUser.BlockedById (long) Required FK Index, 1], [Property: BlockedUser.BlockedUserId (long) Required FK Index, 2], [Property: BlockedUser.CreatedBy (long) Required, 3], [Property: BlockedUser.CreatedDate (DateTime) Required, 4], [Property: BlockedUser.GroupId (long?) FK Index, 5], [Property: BlockedUser.IsActive (bool) Required, 6], [Property: BlockedUser.IsBlockedInGroup (bool) Required, 7], [Property: BlockedUser.IsDeleted (bool) Required, 8], [Property: BlockedUser.UpdatedBy (long?), 9], [Property: BlockedUser.UpdatedDate (DateTime?), 10] }
        SELECT b.Id, b.BlockedById, b.BlockedUserId, b.CreatedBy, b.CreatedDate, b.GroupId, b.IsActive, b.IsBlockedInGroup, b.IsDeleted, b.UpdatedBy, b.UpdatedDate
        FROM BlockedUsers AS b
        WHERE Not(b.IsBlockedInGroup) && (((b.BlockedById == @__userId_0) && (b.BlockedUserId == @__model_ReceiverId_1)) || ((b.BlockedById == @__model_ReceiverId_1) && (b.BlockedUserId == @__userId_0)))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, BlockedUser>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 16:02:31.4349 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:02:31.4395 Creating DbConnection.
2024-02-23 16:02:31.6369 Created DbConnection. (183ms).
2024-02-23 16:02:31.6716 Created DbCommand for 'ExecuteReader' (231ms).
2024-02-23 16:02:31.7135 Initialized DbCommand for 'ExecuteReader' (283ms).
2024-02-23 16:02:31.7268 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:33.1804 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:33.2312 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 16:02:33.6217 Executed DbCommand (352ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 16:02:33.6671 Sending payload: 11 bytes.
2024-02-23 16:02:33.6671 Sent a ping message to the client.
2024-02-23 16:02:33.7029 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:33.7287 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 91ms reading results.
2024-02-23 16:02:33.7375 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:33.7601 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (20ms).
2024-02-23 16:02:33.9479 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:02:34.2931 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:02:34.3101 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:02:34.3235 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:02:34.3531 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:02:34.3964 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 16:02:34.6859 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:34.6859 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:34.6859 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:02:34.6859 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:02:34.6859 Initialized DbCommand for 'ExecuteReader' (5ms).
2024-02-23 16:02:34.6859 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 16:02:34.7423 Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 16:02:34.8337 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:02:34.8622 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:34.8622 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 120ms reading results.
2024-02-23 16:02:34.8622 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:34.8622 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:02:34.9027 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:02:34.9079 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 16:02:34.9369 Compiling query expression: 
'DbSet<Chat>()
    .Include(x => x.Sender)
    .Include(x => x.Receiver)
    .Where(x => x.Id == __com_Id_0)
    .Select(x => new ChatNotificationDto{ 
        Id = x.Id, 
        SenderId = x.SenderId, 
        SenderName = x.Sender.Name, 
        ReceiverId = x.ReceiverId, 
        ReceiverName = x.Receiver.Name, 
        Message = x.Message, 
        Attachments = x.ChatAttachments
            .Select(att => new ChatAttachmentNoticationDto{ 
                Id = att.Id, 
                MediaType = att.MediaType, 
                Name = att.Name, 
                AttachmentUrl = att.AttachmentUrl, 
                ChatId = att.ChatId 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()'
2024-02-23 16:02:35.4791 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ChatNotificationDto>(
    asyncEnumerable: new SingleQueryingEnumerable<ChatNotificationDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
                11 -> 11
                12 -> 12
            SELECT t.Id, t.SenderId, t.Name, t.ReceiverId, t.Name0, t.Message, t.Id0, t.Id1, c0.Id, c0.MediaType, c0.Name, c0.AttachmentUrl, c0.ChatId
            FROM 
            (
                SELECT TOP(1) c.Id, c.SenderId, u.Name, c.ReceiverId, u0.Name AS Name0, c.Message, u.Id AS Id0, u0.Id AS Id1
                FROM Chats AS c
                INNER JOIN Users AS u ON c.SenderId == u.Id
                INNER JOIN Users AS u0 ON c.ReceiverId == u0.Id
                WHERE c.Id == @__com_Id_0
            ) AS t
            LEFT JOIN ChatAttachments AS c0 ON t.Id == c0.ChatId
            ORDER BY t.Id ASC, t.Id0 ASC, t.Id1 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ChatNotificationDto>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 16:02:35.5024 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:02:35.5024 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:02:35.5024 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:02:35.5024 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:35.5024 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:35.5024 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 16:02:35.5630 Executed DbCommand (48ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 16:02:35.5924 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:35.5924 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 29ms reading results.
2024-02-23 16:02:35.5924 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:35.5924 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:02:35.6198 Sending payload: 164 bytes.
2024-02-23 16:02:35.6386 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11650.4003ms.
2024-02-23 16:02:35.6471 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:02:35.6471 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:02:35.6471 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:02:35.6471 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:02:35.6471 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:02:35.6558 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:02:35.6558 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:02:35.6558 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:02:35.6717 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:02:35.6717 No information found on request to perform content negotiation.
2024-02-23 16:02:35.6717 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:02:35.6717 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:02:35.6881 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:02:35.6881 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 16:02:35.7095 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:02:35.7095 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:02:35.7095 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:02:35.7300 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 12036.2949ms
2024-02-23 16:02:35.7329 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:02:35.7329 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:02:35.7548 'UserInteractionDbContext' disposed.
2024-02-23 16:02:35.7818 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:02:35.7818 Disposed connection to database '' on server '' (16ms).
2024-02-23 16:02:35.7960 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 66 - 200 - application/json;+charset=utf-8 13334.8692ms
2024-02-23 16:02:49.6569 Sent a ping message to the client.
2024-02-23 16:02:49.6569 Sending payload: 11 bytes.
2024-02-23 16:03:05.6703 Sent a ping message to the client.
2024-02-23 16:03:05.6703 Sending payload: 11 bytes.
2024-02-23 16:03:21.6635 Sent a ping message to the client.
2024-02-23 16:03:21.6635 Sending payload: 11 bytes.
2024-02-23 16:03:37.6511 Sent a ping message to the client.
2024-02-23 16:03:37.6511 Sending payload: 11 bytes.
2024-02-23 16:03:52.6585 Sent a ping message to the client.
2024-02-23 16:03:52.6585 Sending payload: 11 bytes.
2024-02-23 16:04:07.6717 Sent a ping message to the client.
2024-02-23 16:04:07.6717 Sending payload: 11 bytes.
2024-02-23 16:04:19.3868 Connection id "0HN1KBQMBTVBD" received FIN.
2024-02-23 16:04:19.3963 Connection id "0HN1KBQMBTVBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 16:04:19.4218 Connection id "0HN1KBQMBTVBD" disconnecting.
2024-02-23 16:04:19.4218 Socket connection closed prematurely.
2024-02-23 16:04:19.4372 Waiting for the application to finish sending data.
2024-02-23 16:04:19.4372 Socket closed.
2024-02-23 16:04:19.5013 Disposing connection CHZIrDGqgQ3HuQAl3ls1QA.
2024-02-23 16:04:19.5013 Waiting for application to complete.
2024-02-23 16:04:19.5168 OnConnectedAsync ending.
2024-02-23 16:04:19.6034 Application complete.
2024-02-23 16:04:19.6171 Removing connection QorK8QD1HRtyurVyZsbb-g from the list of connections.
2024-02-23 16:04:19.6171 Executed endpoint '/ConnectionHub'
2024-02-23 16:04:19.6254 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=QorK8QD1HRtyurVyZsbb-g&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiI3NzM0ZmE0Yi1lNGQ2LTQ1YzgtODA5Ny04Y2VjNzQwMDE4YTciLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NjkzNjEwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.dM7bepnSP9H4hX5IxIHusux60San697WsQEFzOvF8VI - - - 101 - - 121221.0768ms
2024-02-23 16:04:19.6254 Connection id "0HN1KBQMBTVBD" stopped.
2024-02-23 16:04:33.5040 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 16:04:33.5040 All hosts are allowed.
2024-02-23 16:04:33.5040 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5040 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5040 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:04:33.5040 The request has an origin header: 'http://localhost:4200'.
2024-02-23 16:04:33.5040 CORS policy execution successful.
2024-02-23 16:04:33.5040 The request is a preflight request.
2024-02-23 16:04:33.5040 Connection id "0HN1KBQMBTVBB" completed keep alive response.
2024-02-23 16:04:33.5040 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 3.1871ms
2024-02-23 16:04:33.5040 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 16:04:33.5040 All hosts are allowed.
2024-02-23 16:04:33.5040 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5040 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5040 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:04:33.5040 The request has an origin header: 'http://localhost:4200'.
2024-02-23 16:04:33.5040 CORS policy execution successful.
2024-02-23 16:04:33.5040 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 16:04:33.5148 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5148 New connection fVa2GFiN72amu6BgFtBqRQ created.
2024-02-23 16:04:33.5148 Sending negotiation response.
2024-02-23 16:04:33.5148 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 16:04:33.5148 Connection id "0HN1KBQMBTVBC" completed keep alive response.
2024-02-23 16:04:33.5148 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 7.6177ms
2024-02-23 16:04:33.5416 Connection id "0HN1KBQMBTVBF" accepted.
2024-02-23 16:04:33.5416 Connection id "0HN1KBQMBTVBF" started.
2024-02-23 16:04:33.5416 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=3YdTf11iRiDehZCqkQpPLQ&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiI3NzM0ZmE0Yi1lNGQ2LTQ1YzgtODA5Ny04Y2VjNzQwMDE4YTciLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NjkzNjEwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.dM7bepnSP9H4hX5IxIHusux60San697WsQEFzOvF8VI - -
2024-02-23 16:04:33.5416 All hosts are allowed.
2024-02-23 16:04:33.5416 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 16:04:33.5416 Request matched endpoint '/ConnectionHub'
2024-02-23 16:04:33.5416 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:04:33.5416 The request has an origin header: 'http://localhost:4200'.
2024-02-23 16:04:33.5416 CORS policy execution successful.
2024-02-23 16:04:33.5450 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 16:04:33.5450 Executing endpoint '/ConnectionHub'
2024-02-23 16:04:33.5450 Establishing new connection.
2024-02-23 16:04:33.5450 OnConnectedAsync started.
2024-02-23 16:04:33.5450 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 16:04:33.5728 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 16:04:33.5728 Found protocol implementation for requested protocol: json.
2024-02-23 16:04:33.5775 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 16:04:33.5775 Sending payload: 3 bytes.
2024-02-23 16:04:33.5775 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:04:33.5775 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 16:04:33.5775 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 16:04:33.5775 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 16:04:33.5775 Sending payload: 64 bytes.
2024-02-23 16:04:48.6462 Sent a ping message to the client.
2024-02-23 16:04:48.6462 Sending payload: 11 bytes.
2024-02-23 16:04:49.3580 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:05:00.2668 Request starting HTTP/1.1 POST http://localhost:5107/api/Group/Add application/json 30
2024-02-23 16:05:00.2668 All hosts are allowed.
2024-02-23 16:05:00.2668 1 candidate(s) found for the request path '/api/Group/Add'
2024-02-23 16:05:00.2668 Endpoint 'UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi)' with route pattern 'api/Group/Add' is valid for the request path '/api/Group/Add'
2024-02-23 16:05:00.2787 Request matched endpoint 'UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:00.2787 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:05:00.2787 The request has an origin header: 'http://localhost:5107'.
2024-02-23 16:05:00.2787 CORS policy execution failed.
2024-02-23 16:05:00.2787 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 16:05:00.2787 Successfully validated the token.
2024-02-23 16:05:00.2787 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:00.2787 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:00.2787 Authorization was successful.
2024-02-23 16:05:00.2970 Executing endpoint 'UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:00.3527 Route matched with {action = "Add", controller = "Group"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Group.AddUpdateGroupDto) on controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi).
2024-02-23 16:05:00.3527 Execution plan of authorization filters (in the following order): None
2024-02-23 16:05:00.3527 Execution plan of resource filters (in the following order): None
2024-02-23 16:05:00.3527 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:05:00.3527 Execution plan of exception filters (in the following order): None
2024-02-23 16:05:00.3527 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:05:00.3527 Executing controller factory for controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi)
2024-02-23 16:05:00.3568 Executed controller factory for controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi)
2024-02-23 16:05:00.3568 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto' ...
2024-02-23 16:05:00.3568 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto' using the name '' in request data ...
2024-02-23 16:05:00.3568 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 16:05:00.3568 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000002": started reading request body.
2024-02-23 16:05:00.3568 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000002": done reading request body.
2024-02-23 16:05:00.3735 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto'
2024-02-23 16:05:00.3735 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto'.
2024-02-23 16:05:00.3735 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto'.
2024-02-23 16:05:00.3735 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto' ...
2024-02-23 16:05:00.3735 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Group.AddUpdateGroupDto'.
2024-02-23 16:05:00.3735 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:00.3735 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:00.3735 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:00.3735 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:00.3735 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:00.3735 Executing action method UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:05:00.3735 Executing action method UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Group.AddUpdateGroupDto)
2024-02-23 16:05:00.5330 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:05:00.5330 Compiling query expression: 
'DbSet<Group>()
    .Any(x => x.Name.ToLower() == __ToLower_0)'
2024-02-23 16:05:00.5946 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Groups AS g
                WHERE LOWER(g.Name) == @__ToLower_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 16:05:00.6847 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:00.6888 Creating DbConnection.
2024-02-23 16:05:00.6888 Created DbConnection. (2ms).
2024-02-23 16:05:00.6888 Created DbCommand for 'ExecuteReader' (6ms).
2024-02-23 16:05:00.6888 Initialized DbCommand for 'ExecuteReader' (6ms).
2024-02-23 16:05:00.6888 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:00.6888 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:00.6888 Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 555)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Groups] AS [g]
        WHERE LOWER([g].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 16:05:00.7528 Executed DbCommand (45ms) [Parameters=[@__ToLower_0='?' (Size = 555)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Groups] AS [g]
        WHERE LOWER([g].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 16:05:00.7792 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:00.7796 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 26ms reading results.
2024-02-23 16:05:00.7796 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:00.7796 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:00.7796 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Group"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:00.9543 Context 'UserInteractionDbContext' started tracking 'Group' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:00.9769 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."UserGroup"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:01.0938 The navigation 'UserGroup.Group' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:01.1643 Context 'UserInteractionDbContext' started tracking 'UserGroup' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:01.1643 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:05:01.1643 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:05:01.2056 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 16:05:01.2643 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.2643 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.2643 Beginning transaction with isolation level 'Unspecified'.
2024-02-23 16:05:01.3070 Began transaction with isolation level 'ReadCommitted'.
2024-02-23 16:05:01.3130 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:01.3130 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:01.3130 Initialized DbCommand for 'ExecuteReader' (5ms).
2024-02-23 16:05:01.3130 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 555), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Groups] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-02-23 16:05:01.3466 Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 555), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Groups] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Name], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-02-23 16:05:01.3466 The foreign key property 'Group.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:05:01.3984 The foreign key property 'UserGroup.GroupId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:05:01.4183 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.4183 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 71ms reading results.
2024-02-23 16:05:01.4183 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:01.4183 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:01.4204 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:01.4204 Executing DbCommand [Parameters=[@p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGroups] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [IsGroupAdmin], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2024-02-23 16:05:01.4549 Executed DbCommand (21ms) [Parameters=[@p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int64), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int64), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGroups] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [IsGroupAdmin], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2024-02-23 16:05:01.4549 The foreign key property 'UserGroup.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:05:01.4549 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.4549 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 3ms reading results.
2024-02-23 16:05:01.4753 Committing transaction.
2024-02-23 16:05:01.5017 Committed transaction.
2024-02-23 16:05:01.5017 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.5136 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:01.5136 Disposing transaction.
2024-02-23 16:05:01.5136 An entity of type 'Group' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:01.5297 An entity of type 'UserGroup' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:01.5297 SaveChanges completed for 'UserInteractionDbContext' with 2 entities written to the database.
2024-02-23 16:05:01.5297 Executed action method UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1148.7598ms.
2024-02-23 16:05:01.5297 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:01.5297 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:01.5297 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:01.5297 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:01.5297 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:01.5297 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:01.5297 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:01.5297 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:01.5297 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:05:01.5297 No information found on request to perform content negotiation.
2024-02-23 16:05:01.5297 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:05:01.5297 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:05:01.5297 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:05:01.5297 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 16:05:01.5297 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:01.5297 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:01.5297 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:01.5297 Executed action UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi) in 1182.3336ms
2024-02-23 16:05:01.5297 Executed endpoint 'UserInteraction_WebApi.Controllers.GroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:01.5297 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:05:01.5297 'UserInteractionDbContext' disposed.
2024-02-23 16:05:01.5297 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:01.5297 Disposed connection to database '' on server '' (0ms).
2024-02-23 16:05:01.5297 Request finished HTTP/1.1 POST http://localhost:5107/api/Group/Add application/json 30 - 200 - application/json;+charset=utf-8 1271.4920ms
2024-02-23 16:05:04.6571 Sent a ping message to the client.
2024-02-23 16:05:04.6571 Sending payload: 11 bytes.
2024-02-23 16:05:04.6571 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:05:07.1933 Request starting HTTP/1.1 GET http://localhost:5107/api/Group/GetAll - -
2024-02-23 16:05:07.1933 All hosts are allowed.
2024-02-23 16:05:07.1933 1 candidate(s) found for the request path '/api/Group/GetAll'
2024-02-23 16:05:07.1933 Endpoint 'UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi)' with route pattern 'api/Group/GetAll' is valid for the request path '/api/Group/GetAll'
2024-02-23 16:05:07.1933 Request matched endpoint 'UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:07.1933 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:05:07.1933 Successfully validated the token.
2024-02-23 16:05:07.1933 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:07.2017 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:07.2017 Authorization was successful.
2024-02-23 16:05:07.2017 Executing endpoint 'UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:07.2017 Route matched with {action = "GetAll", controller = "Group"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi).
2024-02-23 16:05:07.2017 Execution plan of authorization filters (in the following order): None
2024-02-23 16:05:07.2017 Execution plan of resource filters (in the following order): None
2024-02-23 16:05:07.2017 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:05:07.2017 Execution plan of exception filters (in the following order): None
2024-02-23 16:05:07.2017 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:05:07.2017 Executing controller factory for controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi)
2024-02-23 16:05:07.2017 Executed controller factory for controller UserInteraction_WebApi.Controllers.GroupController (UserInteraction_WebApi)
2024-02-23 16:05:07.2166 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:07.2166 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:07.2166 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:07.2166 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:07.2166 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:07.2166 Executing action method UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:05:07.6291 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:05:07.6444 Compiling query expression: 
'DbSet<Group>()
    .Join(
        inner: DbSet<User>(), 
        outerKeySelector: g => g.CreatedBy, 
        innerKeySelector: u => u.Id, 
        resultSelector: (g, u) => new GetGroupDto{ 
            Id = g.Id, 
            Name = g.Name, 
            CreatedBy = g.CreatedBy, 
            CreatedByName = u.Name 
        }
    )'
2024-02-23 16:05:07.6755 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<GetGroupDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            Name -> 1
            CreatedBy -> 2
            CreatedByName -> 3
        SELECT g.Id, g.Name, g.CreatedBy, u.Name AS CreatedByName
        FROM Groups AS g
        INNER JOIN Users AS u ON g.CreatedBy == u.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, GetGroupDto>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 16:05:07.6755 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:07.6755 Creating DbConnection.
2024-02-23 16:05:07.6755 Created DbConnection. (0ms).
2024-02-23 16:05:07.6755 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:07.6755 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:07.6755 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:07.6755 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:07.6755 Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[CreatedBy], [u].[Name] AS [CreatedByName]
FROM [Groups] AS [g]
INNER JOIN [Users] AS [u] ON [g].[CreatedBy] = [u].[Id]
2024-02-23 16:05:07.7252 Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[CreatedBy], [u].[Name] AS [CreatedByName]
FROM [Groups] AS [g]
INNER JOIN [Users] AS [u] ON [g].[CreatedBy] = [u].[Id]
2024-02-23 16:05:07.7252 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:07.7252 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 4ms reading results.
2024-02-23 16:05:07.7252 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:07.7252 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:07.7323 Executed action method UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 514.958ms.
2024-02-23 16:05:07.7323 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:07.7323 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:07.7323 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:07.7323 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:07.7323 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:07.7323 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:07.7323 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:07.7323 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:07.7323 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:05:07.7323 No information found on request to perform content negotiation.
2024-02-23 16:05:07.7323 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:05:07.7323 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:05:07.7323 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:05:07.7323 Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserInteraction_Application.Dtos.Group.GetGroupDto, UserInteraction_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-02-23 16:05:07.7729 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:07.7729 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:07.7729 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:07.7729 Executed action UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi) in 557.5524ms
2024-02-23 16:05:07.7729 Executed endpoint 'UserInteraction_WebApi.Controllers.GroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:07.7729 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:05:07.7729 'UserInteractionDbContext' disposed.
2024-02-23 16:05:07.7729 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:07.7729 Disposed connection to database '' on server '' (0ms).
2024-02-23 16:05:07.7729 Request finished HTTP/1.1 GET http://localhost:5107/api/Group/GetAll - - - 200 - application/json;+charset=utf-8 581.5736ms
2024-02-23 16:05:20.6571 Sent a ping message to the client.
2024-02-23 16:05:20.6571 Sending payload: 11 bytes.
2024-02-23 16:05:20.6571 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:05:36.6539 Sent a ping message to the client.
2024-02-23 16:05:36.6546 Sending payload: 11 bytes.
2024-02-23 16:05:36.7368 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:05:47.5234 Request starting HTTP/1.1 POST http://localhost:5107/api/UserGroup/Add application/json 33
2024-02-23 16:05:47.5234 All hosts are allowed.
2024-02-23 16:05:47.5234 1 candidate(s) found for the request path '/api/UserGroup/Add'
2024-02-23 16:05:47.5234 Endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi)' with route pattern 'api/UserGroup/Add' is valid for the request path '/api/UserGroup/Add'
2024-02-23 16:05:47.5234 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:47.5234 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:05:47.5234 The request has an origin header: 'http://localhost:5107'.
2024-02-23 16:05:47.5234 CORS policy execution failed.
2024-02-23 16:05:47.5234 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 16:05:47.5234 Successfully validated the token.
2024-02-23 16:05:47.5234 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:47.5234 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:47.5234 Authorization was successful.
2024-02-23 16:05:47.5308 Executing endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:47.5463 Route matched with {action = "Add", controller = "UserGroup"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto) on controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi).
2024-02-23 16:05:47.5463 Execution plan of authorization filters (in the following order): None
2024-02-23 16:05:47.5463 Execution plan of resource filters (in the following order): None
2024-02-23 16:05:47.5463 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:05:47.5463 Execution plan of exception filters (in the following order): None
2024-02-23 16:05:47.5463 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:05:47.5463 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi)
2024-02-23 16:05:47.5463 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi)
2024-02-23 16:05:47.5463 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto' ...
2024-02-23 16:05:47.5463 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto' using the name '' in request data ...
2024-02-23 16:05:47.5463 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 16:05:47.5463 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000004": started reading request body.
2024-02-23 16:05:47.5463 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000004": done reading request body.
2024-02-23 16:05:47.5463 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto'
2024-02-23 16:05:47.5463 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto'.
2024-02-23 16:05:47.5463 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto'.
2024-02-23 16:05:47.5463 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto' ...
2024-02-23 16:05:47.5463 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto'.
2024-02-23 16:05:47.5463 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:47.5463 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:47.5463 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:47.5463 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:47.5463 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:47.5463 Executing action method UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:05:47.5463 Executing action method UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.UserGroups.AddUserGroupDto)
2024-02-23 16:05:47.5928 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:05:47.5928 Compiling query expression: 
'DbSet<UserGroup>()
    .Any(x => (long?)x.GroupId == __GroupId_0 && x.UserId == __userId_1 && x.IsGroupAdmin)'
2024-02-23 16:05:47.6079 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM UserGroups AS u
                WHERE ((u.GroupId == @__GroupId_0) && (u.UserId == @__userId_1)) && u.IsGroupAdmin)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 16:05:47.6079 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:47.6079 Creating DbConnection.
2024-02-23 16:05:47.6079 Created DbConnection. (0ms).
2024-02-23 16:05:47.6079 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:47.6079 Initialized DbCommand for 'ExecuteReader' (1ms).
2024-02-23 16:05:47.6079 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.6079 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.6079 Executing DbCommand [Parameters=[@__GroupId_0='?' (DbType = Int64), @__userId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGroups] AS [u]
        WHERE [u].[GroupId] = @__GroupId_0 AND [u].[UserId] = @__userId_1 AND [u].[IsGroupAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 16:05:47.6630 Executed DbCommand (40ms) [Parameters=[@__GroupId_0='?' (DbType = Int64), @__userId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGroups] AS [u]
        WHERE [u].[GroupId] = @__GroupId_0 AND [u].[UserId] = @__userId_1 AND [u].[IsGroupAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-02-23 16:05:47.6630 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.6630 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 1ms reading results.
2024-02-23 16:05:47.6630 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.6630 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:47.6850 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."UserGroup"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:47.6927 Context 'UserInteractionDbContext' started tracking 'UserGroup' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:47.7016 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:05:47.7016 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:05:47.7016 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 16:05:47.7016 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.7016 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.7016 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:47.7016 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:47.7016 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:47.7016 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGroups] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsGroupAdmin]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-02-23 16:05:47.7682 Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int64), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGroups] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [UpdatedBy], [UpdatedDate], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsGroupAdmin]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-02-23 16:05:47.7682 The foreign key property 'UserGroup.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:05:47.7682 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.7682 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 1ms reading results.
2024-02-23 16:05:47.7682 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.7682 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:47.7682 An entity of type 'UserGroup' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:47.7682 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 16:05:47.7682 Executed action method UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 215.0228ms.
2024-02-23 16:05:47.7682 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:47.7682 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:47.7682 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:47.7682 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:47.7682 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:47.7682 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:47.7682 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:47.7682 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:47.7682 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:05:47.7682 No information found on request to perform content negotiation.
2024-02-23 16:05:47.7682 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:05:47.7682 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:05:47.7682 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:05:47.7682 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 16:05:47.7682 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:47.7682 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:47.7682 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:47.7682 Executed action UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi) in 226.8546ms
2024-02-23 16:05:47.7682 Executed endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.Add (UserInteraction_WebApi)'
2024-02-23 16:05:47.7682 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:05:47.7682 'UserInteractionDbContext' disposed.
2024-02-23 16:05:47.7682 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:47.7682 Disposed connection to database '' on server '' (0ms).
2024-02-23 16:05:47.7682 Request finished HTTP/1.1 POST http://localhost:5107/api/UserGroup/Add application/json 33 - 200 - application/json;+charset=utf-8 252.1341ms
2024-02-23 16:05:52.6643 Sent a ping message to the client.
2024-02-23 16:05:52.6643 Sending payload: 11 bytes.
2024-02-23 16:05:52.8064 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:05:53.1646 Request starting HTTP/1.1 GET http://localhost:5107/api/UserGroup/GetAll - -
2024-02-23 16:05:53.1646 All hosts are allowed.
2024-02-23 16:05:53.1700 1 candidate(s) found for the request path '/api/UserGroup/GetAll'
2024-02-23 16:05:53.1700 Endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi)' with route pattern 'api/UserGroup/GetAll' is valid for the request path '/api/UserGroup/GetAll'
2024-02-23 16:05:53.1700 Request matched endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:53.1700 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:05:53.1700 Successfully validated the token.
2024-02-23 16:05:53.1700 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:53.1700 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:05:53.1700 Authorization was successful.
2024-02-23 16:05:53.1700 Executing endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:53.1974 Route matched with {action = "GetAll", controller = "UserGroup"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi).
2024-02-23 16:05:53.1974 Execution plan of authorization filters (in the following order): None
2024-02-23 16:05:53.1974 Execution plan of resource filters (in the following order): None
2024-02-23 16:05:53.1974 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:05:53.1974 Execution plan of exception filters (in the following order): None
2024-02-23 16:05:53.1974 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:05:53.1974 Executing controller factory for controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi)
2024-02-23 16:05:53.1974 Executed controller factory for controller UserInteraction_WebApi.Controllers.UserGroupController (UserInteraction_WebApi)
2024-02-23 16:05:53.1974 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:53.1974 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:53.1974 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:53.1974 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:53.1974 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:53.1974 Executing action method UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:05:53.2221 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:05:53.2221 Compiling query expression: 
'DbSet<UserGroup>()
    .Where(x => x.UserId == __userId_0)'
2024-02-23 16:05:53.2440 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserGroup>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserGroup.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserGroup.CreatedBy (long) Required, 1], [Property: UserGroup.CreatedDate (DateTime) Required, 2], [Property: UserGroup.GroupId (long) Required FK Index, 3], [Property: UserGroup.IsActive (bool) Required, 4], [Property: UserGroup.IsDeleted (bool) Required, 5], [Property: UserGroup.IsGroupAdmin (bool) Required ValueGenerated.OnAdd, 6], [Property: UserGroup.UpdatedBy (long?), 7], [Property: UserGroup.UpdatedDate (DateTime?), 8], [Property: UserGroup.UserId (long) Required FK Index, 9] }
        SELECT u.Id, u.CreatedBy, u.CreatedDate, u.GroupId, u.IsActive, u.IsDeleted, u.IsGroupAdmin, u.UpdatedBy, u.UpdatedDate, u.UserId
        FROM UserGroups AS u
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserGroup>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 16:05:53.2503 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:05:53.2503 Creating DbConnection.
2024-02-23 16:05:53.2503 Created DbConnection. (0ms).
2024-02-23 16:05:53.2503 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:53.2503 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:05:53.2503 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:53.2503 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:53.2503 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[GroupId], [u].[IsActive], [u].[IsDeleted], [u].[IsGroupAdmin], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [UserGroups] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-02-23 16:05:53.3089 Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[GroupId], [u].[IsActive], [u].[IsDeleted], [u].[IsGroupAdmin], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserId]
FROM [UserGroups] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-02-23 16:05:53.3319 Context 'UserInteractionDbContext' started tracking 'UserGroup' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:05:53.3319 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:53.3319 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 25ms reading results.
2024-02-23 16:05:53.3319 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:53.3319 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:05:53.3795 Executed action method UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 179.4098ms.
2024-02-23 16:05:53.3795 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:05:53.3795 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:53.3795 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:05:53.3795 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:53.3795 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:05:53.3795 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:53.3795 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:53.3795 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:53.3795 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:05:53.3795 No information found on request to perform content negotiation.
2024-02-23 16:05:53.3795 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:05:53.3795 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:05:53.3795 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:05:53.3795 Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserInteraction_Application.Dtos.UserGroups.GetUserGroupDto, UserInteraction_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-02-23 16:05:53.3795 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:05:53.3795 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:53.3795 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:05:53.3795 Executed action UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi) in 187.7643ms
2024-02-23 16:05:53.3795 Executed endpoint 'UserInteraction_WebApi.Controllers.UserGroupController.GetAll (UserInteraction_WebApi)'
2024-02-23 16:05:53.3795 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:05:53.3795 'UserInteractionDbContext' disposed.
2024-02-23 16:05:53.3795 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:05:53.3795 Disposed connection to database '' on server '' (0ms).
2024-02-23 16:05:53.3795 Request finished HTTP/1.1 GET http://localhost:5107/api/UserGroup/GetAll - - - 200 - application/json;+charset=utf-8 222.1265ms
2024-02-23 16:06:08.6632 Sent a ping message to the client.
2024-02-23 16:06:08.6632 Sending payload: 11 bytes.
2024-02-23 16:06:08.7629 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:06:24.6521 Sent a ping message to the client.
2024-02-23 16:06:24.6521 Sending payload: 11 bytes.
2024-02-23 16:06:24.7013 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:06:39.6571 Sent a ping message to the client.
2024-02-23 16:06:39.6571 Sending payload: 11 bytes.
2024-02-23 16:06:39.7281 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:06:52.8994 Request starting HTTP/1.1 POST http://localhost:5107/api/GroupChat/Add application/json 86
2024-02-23 16:06:52.8994 All hosts are allowed.
2024-02-23 16:06:52.8994 1 candidate(s) found for the request path '/api/GroupChat/Add'
2024-02-23 16:06:52.8994 Endpoint 'UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi)' with route pattern 'api/GroupChat/Add' is valid for the request path '/api/GroupChat/Add'
2024-02-23 16:06:52.8994 Request matched endpoint 'UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:06:52.8994 Static files was skipped as the request already matched an endpoint.
2024-02-23 16:06:52.8994 The request has an origin header: 'http://localhost:5107'.
2024-02-23 16:06:52.8994 CORS policy execution failed.
2024-02-23 16:06:52.8994 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 16:06:52.8994 Successfully validated the token.
2024-02-23 16:06:52.8994 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:06:52.8994 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 16:06:52.8994 Authorization was successful.
2024-02-23 16:06:52.9052 Executing endpoint 'UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:06:52.9234 Route matched with {action = "Add", controller = "GroupChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto) on controller UserInteraction_WebApi.Controllers.GroupChatController (UserInteraction_WebApi).
2024-02-23 16:06:52.9234 Execution plan of authorization filters (in the following order): None
2024-02-23 16:06:52.9234 Execution plan of resource filters (in the following order): None
2024-02-23 16:06:52.9234 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 16:06:52.9234 Execution plan of exception filters (in the following order): None
2024-02-23 16:06:52.9234 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 16:06:52.9234 Executing controller factory for controller UserInteraction_WebApi.Controllers.GroupChatController (UserInteraction_WebApi)
2024-02-23 16:06:52.9234 Executed controller factory for controller UserInteraction_WebApi.Controllers.GroupChatController (UserInteraction_WebApi)
2024-02-23 16:06:52.9234 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto' ...
2024-02-23 16:06:52.9234 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto' using the name '' in request data ...
2024-02-23 16:06:52.9234 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 16:06:52.9234 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000006": started reading request body.
2024-02-23 16:06:52.9234 Connection id "0HN1KBQMBTVBE", Request id "0HN1KBQMBTVBE:00000006": done reading request body.
2024-02-23 16:06:52.9234 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto'
2024-02-23 16:06:52.9234 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto'.
2024-02-23 16:06:52.9234 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto'.
2024-02-23 16:06:52.9234 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto' ...
2024-02-23 16:06:52.9476 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto'.
2024-02-23 16:06:52.9476 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:06:52.9476 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:06:52.9476 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:06:52.9476 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:06:52.9476 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:06:52.9476 Executing action method UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 16:06:52.9476 Executing action method UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.GroupChat.AddUpdateGroupChatDto)
2024-02-23 16:06:52.9817 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 16:06:52.9817 Compiling query expression: 
'DbSet<BlockedUser>()
    .Where(x => x.GroupId == __model_GroupId_0 && x.BlockedUserId == __userId_1 && x.IsBlockedInGroup)'
2024-02-23 16:06:53.0063 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<BlockedUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: BlockedUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: BlockedUser.BlockedById (long) Required FK Index, 1], [Property: BlockedUser.BlockedUserId (long) Required FK Index, 2], [Property: BlockedUser.CreatedBy (long) Required, 3], [Property: BlockedUser.CreatedDate (DateTime) Required, 4], [Property: BlockedUser.GroupId (long?) FK Index, 5], [Property: BlockedUser.IsActive (bool) Required, 6], [Property: BlockedUser.IsBlockedInGroup (bool) Required, 7], [Property: BlockedUser.IsDeleted (bool) Required, 8], [Property: BlockedUser.UpdatedBy (long?), 9], [Property: BlockedUser.UpdatedDate (DateTime?), 10] }
        SELECT b.Id, b.BlockedById, b.BlockedUserId, b.CreatedBy, b.CreatedDate, b.GroupId, b.IsActive, b.IsBlockedInGroup, b.IsDeleted, b.UpdatedBy, b.UpdatedDate
        FROM BlockedUsers AS b
        WHERE ((b.GroupId == @__model_GroupId_0) && (b.BlockedUserId == @__userId_1)) && b.IsBlockedInGroup), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, BlockedUser>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 16:06:53.0063 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:06:53.0063 Creating DbConnection.
2024-02-23 16:06:53.0063 Created DbConnection. (0ms).
2024-02-23 16:06:53.0063 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.0063 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.0063 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.0063 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.0063 Executing DbCommand [Parameters=[@__model_GroupId_0='?' (DbType = Int64), @__userId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[GroupId] = @__model_GroupId_0 AND [b].[BlockedUserId] = @__userId_1 AND [b].[IsBlockedInGroup] = CAST(1 AS bit)
2024-02-23 16:06:53.0509 Executed DbCommand (23ms) [Parameters=[@__model_GroupId_0='?' (DbType = Int64), @__userId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[GroupId] = @__model_GroupId_0 AND [b].[BlockedUserId] = @__userId_1 AND [b].[IsBlockedInGroup] = CAST(1 AS bit)
2024-02-23 16:06:53.0509 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.0509 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 16:06:53.0509 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.0509 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:06:53.0833 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."GroupChat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:06:53.2076 Context 'UserInteractionDbContext' started tracking 'GroupChat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:06:53.2076 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:06:53.2076 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 16:06:53.2281 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 16:06:53.2337 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.2337 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.2337 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:06:53.2337 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.2337 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.2337 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [GroupChats] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [Message], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 16:06:53.2693 Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [GroupChats] ([CreatedBy], [CreatedDate], [GroupId], [IsActive], [IsDeleted], [Message], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 16:06:53.2693 The foreign key property 'GroupChat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 16:06:53.2693 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.2693 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 4ms reading results.
2024-02-23 16:06:53.2693 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.2693 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:06:53.2693 An entity of type 'GroupChat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 16:06:53.2693 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 16:06:53.2885 Compiling query expression: 
'DbSet<GroupChat>()
    .Include(x => x.Sender)
    .Include(x => x.Group)
    .Where(x => x.Id == __com_Id_0)
    .Select(x => new GroupChatNotificationDto{ 
        Id = x.Id, 
        SenderId = x.SenderId, 
        SenderName = x.Sender.Name, 
        GroupId = x.GroupId, 
        GroupName = x.Group.Name, 
        Message = x.Message, 
        Attachments = x.GroupChatAttachements
            .Select(att => new GroupChatNotificationAttachmentDto{ 
                Id = att.Id, 
                MediaType = att.MediaType, 
                Name = att.Name, 
                AttachmentUrl = att.AttachmentUrl, 
                GroupChatId = att.GroupChatId 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()'
2024-02-23 16:06:53.3683 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<GroupChatNotificationDto>(
    asyncEnumerable: new SingleQueryingEnumerable<GroupChatNotificationDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
                11 -> 11
                12 -> 12
            SELECT t.Id, t.SenderId, t.Name, t.GroupId, t.Name0, t.Message, t.Id0, t.Id1, g1.Id, g1.MediaType, g1.Name, g1.AttachmentUrl, g1.GroupChatId
            FROM 
            (
                SELECT TOP(1) g.Id, g.SenderId, u.Name, g.GroupId, g0.Name AS Name0, g.Message, u.Id AS Id0, g0.Id AS Id1
                FROM GroupChats AS g
                INNER JOIN Users AS u ON g.SenderId == u.Id
                INNER JOIN Groups AS g0 ON g.GroupId == g0.Id
                WHERE g.Id == @__com_Id_0
            ) AS t
            LEFT JOIN GroupChatAttachements AS g1 ON t.Id == g1.GroupChatId
            ORDER BY t.Id ASC, t.Id0 ASC, t.Id1 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, GroupChatNotificationDto>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 16:06:53.3765 Creating DbCommand for 'ExecuteReader'.
2024-02-23 16:06:53.3765 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.3765 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 16:06:53.3765 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.3765 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.3765 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[GroupId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [g1].[Id], [g1].[MediaType], [g1].[Name], [g1].[AttachmentUrl], [g1].[GroupChatId]
FROM (
    SELECT TOP(1) [g].[Id], [g].[SenderId], [u].[Name], [g].[GroupId], [g0].[Name] AS [Name0], [g].[Message], [u].[Id] AS [Id0], [g0].[Id] AS [Id1]
    FROM [GroupChats] AS [g]
    INNER JOIN [Users] AS [u] ON [g].[SenderId] = [u].[Id]
    INNER JOIN [Groups] AS [g0] ON [g].[GroupId] = [g0].[Id]
    WHERE [g].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [GroupChatAttachements] AS [g1] ON [t].[Id] = [g1].[GroupChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 16:06:53.4555 Executed DbCommand (66ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[GroupId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [g1].[Id], [g1].[MediaType], [g1].[Name], [g1].[AttachmentUrl], [g1].[GroupChatId]
FROM (
    SELECT TOP(1) [g].[Id], [g].[SenderId], [u].[Name], [g].[GroupId], [g0].[Name] AS [Name0], [g].[Message], [u].[Id] AS [Id0], [g0].[Id] AS [Id1]
    FROM [GroupChats] AS [g]
    INNER JOIN [Users] AS [u] ON [g].[SenderId] = [u].[Id]
    INNER JOIN [Groups] AS [g0] ON [g].[GroupId] = [g0].[Id]
    WHERE [g].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [GroupChatAttachements] AS [g1] ON [t].[Id] = [g1].[GroupChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 16:06:53.4555 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.4555 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 5ms reading results.
2024-02-23 16:06:53.4555 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.4555 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 16:06:53.4833 Sending payload: 197 bytes.
2024-02-23 16:06:53.4833 Executed action method UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 533.5056ms.
2024-02-23 16:06:53.4833 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 16:06:53.4833 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:06:53.4833 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 16:06:53.4833 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:06:53.4833 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 16:06:53.4833 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:06:53.4833 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:06:53.4833 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:06:53.4833 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 16:06:53.4833 No information found on request to perform content negotiation.
2024-02-23 16:06:53.4833 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 16:06:53.4833 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 16:06:53.4833 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 16:06:53.4833 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 16:06:53.4833 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 16:06:53.4833 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:06:53.4833 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 16:06:53.4833 Executed action UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi) in 567.2559ms
2024-02-23 16:06:53.4833 Executed endpoint 'UserInteraction_WebApi.Controllers.GroupChatController.Add (UserInteraction_WebApi)'
2024-02-23 16:06:53.4833 Connection id "0HN1KBQMBTVBE" completed keep alive response.
2024-02-23 16:06:53.4833 'UserInteractionDbContext' disposed.
2024-02-23 16:06:53.4833 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 16:06:53.4833 Disposed connection to database '' on server '' (0ms).
2024-02-23 16:06:53.4833 Request finished HTTP/1.1 POST http://localhost:5107/api/GroupChat/Add application/json 86 - 200 - application/json;+charset=utf-8 593.5460ms
2024-02-23 16:06:55.6458 Sent a ping message to the client.
2024-02-23 16:06:55.6458 Sending payload: 11 bytes.
2024-02-23 16:07:10.6576 Sent a ping message to the client.
2024-02-23 16:07:10.6576 Sending payload: 11 bytes.
2024-02-23 16:07:22.9564 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 16:07:26.6495 Sent a ping message to the client.
2024-02-23 16:07:26.6495 Sending payload: 11 bytes.
2024-02-23 20:57:48.5029 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 20:57:48.5916 New connection MgsMvWw3n1BEsdc_wHmebw created.
2024-02-23 20:57:48.6339 Sending negotiation response.
2024-02-23 20:57:48.6339 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 20:57:48.6339 Connection id "0HN1KGV1FR82L" completed keep alive response.
2024-02-23 20:57:48.6751 Connection id "0HN1KGV1FR82M" accepted.
2024-02-23 20:57:48.6751 Connection id "0HN1KGV1FR82M" started.
2024-02-23 20:57:48.6751 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=dpiXbVFxtUlSlvT7V_eVDw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 20:57:48.6751 All hosts are allowed.
2024-02-23 20:57:48.7003 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 20:57:48.7003 Request matched endpoint '/ConnectionHub'
2024-02-23 20:57:48.7003 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:57:48.7003 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:57:48.7003 CORS policy execution successful.
2024-02-23 20:57:48.7169 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 20:57:48.7697 Executing endpoint '/ConnectionHub'
2024-02-23 20:57:48.7847 Establishing new connection.
2024-02-23 20:57:48.7847 OnConnectedAsync started.
2024-02-23 20:57:48.8454 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 20:57:48.8810 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 20:57:48.8958 Found protocol implementation for requested protocol: json.
2024-02-23 20:57:48.9064 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 20:57:49.0148 Sending payload: 3 bytes.
2024-02-23 20:57:49.1337 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:57:49.1337 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 20:57:49.1566 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 20:57:49.1925 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 20:57:49.1925 Sending payload: 64 bytes.
2024-02-23 20:58:03.9325 Sending payload: 11 bytes.
2024-02-23 20:58:03.9325 Sent a ping message to the client.
2024-02-23 20:58:04.1764 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:58:08.8939 Connection id "0HN1KGV1FR82M" received FIN.
2024-02-23 20:58:08.8939 Connection id "0HN1KGV1FR82M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 20:58:08.8939 Connection id "0HN1KGV1FR82M" disconnecting.
2024-02-23 20:58:08.8939 Waiting for the application to finish sending data.
2024-02-23 20:58:08.8939 Socket closed.
2024-02-23 20:58:08.9178 Disposing connection MgsMvWw3n1BEsdc_wHmebw.
2024-02-23 20:58:08.9178 Waiting for application to complete.
2024-02-23 20:58:08.9427 OnConnectedAsync ending.
2024-02-23 20:58:08.9637 Application complete.
2024-02-23 20:58:08.9730 Removing connection dpiXbVFxtUlSlvT7V_eVDw from the list of connections.
2024-02-23 20:58:08.9730 Executed endpoint '/ConnectionHub'
2024-02-23 20:58:09.0102 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=dpiXbVFxtUlSlvT7V_eVDw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 20328.2737ms
2024-02-23 20:58:09.0102 Connection id "0HN1KGV1FR82M" stopped.
2024-02-23 20:58:09.7390 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 20:58:09.7390 All hosts are allowed.
2024-02-23 20:58:09.7390 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 20:58:09.7390 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 20:58:09.7390 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:58:09.7390 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:58:09.7390 CORS policy execution successful.
2024-02-23 20:58:09.7390 The request is a preflight request.
2024-02-23 20:58:09.7390 Connection id "0HN1KGV1FR82K" completed keep alive response.
2024-02-23 20:58:09.7390 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 2.2064ms
2024-02-23 20:58:09.7390 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 20:58:09.7390 All hosts are allowed.
2024-02-23 20:58:09.7390 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 20:58:09.7390 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 20:58:09.7390 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:58:09.7390 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:58:09.7390 CORS policy execution successful.
2024-02-23 20:58:09.7635 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 20:58:09.8066 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 20:58:09.8066 New connection qHG0l7gwWpGDaqIBYqcPGA created.
2024-02-23 20:58:09.8066 Sending negotiation response.
2024-02-23 20:58:09.8066 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 20:58:09.8066 Connection id "0HN1KGV1FR82L" completed keep alive response.
2024-02-23 20:58:09.8066 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 63.6771ms
2024-02-23 20:58:09.8238 Connection id "0HN1KGV1FR82N" accepted.
2024-02-23 20:58:09.8238 Connection id "0HN1KGV1FR82N" started.
2024-02-23 20:58:09.8238 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=2v4S773fJ3tTXw4fMUzRhw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 20:58:09.8238 All hosts are allowed.
2024-02-23 20:58:09.8238 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 20:58:09.8238 Request matched endpoint '/ConnectionHub'
2024-02-23 20:58:09.8238 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:58:09.8238 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:58:09.8238 CORS policy execution successful.
2024-02-23 20:58:09.8238 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 20:58:09.8303 Executing endpoint '/ConnectionHub'
2024-02-23 20:58:09.8303 Establishing new connection.
2024-02-23 20:58:09.8303 OnConnectedAsync started.
2024-02-23 20:58:09.8303 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 20:58:09.8518 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 20:58:09.8518 Found protocol implementation for requested protocol: json.
2024-02-23 20:58:09.8637 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 20:58:09.8637 Sending payload: 3 bytes.
2024-02-23 20:58:09.8637 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:58:09.8637 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 20:58:09.8637 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 20:58:09.8756 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 20:58:09.8756 Sending payload: 64 bytes.
2024-02-23 20:58:24.9385 Sent a ping message to the client.
2024-02-23 20:58:24.9385 Sending payload: 11 bytes.
2024-02-23 20:58:25.1710 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:58:26.7415 Connection id "0HN1KGV1FR82O" accepted.
2024-02-23 20:58:26.7415 Connection id "0HN1KGV1FR82O" started.
2024-02-23 20:58:26.7415 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73
2024-02-23 20:58:26.7415 All hosts are allowed.
2024-02-23 20:58:26.7415 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 20:58:26.7550 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 20:58:26.7550 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:58:26.7550 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:58:26.7550 The request has an origin header: 'http://localhost:5107'.
2024-02-23 20:58:26.7550 CORS policy execution failed.
2024-02-23 20:58:26.7550 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 20:58:27.5967 Successfully validated the token.
2024-02-23 20:58:27.6011 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 20:58:27.6011 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 20:58:27.6227 Authorization was successful.
2024-02-23 20:58:27.6274 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:58:27.7127 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 20:58:27.7173 Execution plan of authorization filters (in the following order): None
2024-02-23 20:58:27.7173 Execution plan of resource filters (in the following order): None
2024-02-23 20:58:27.7173 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 20:58:27.7173 Execution plan of exception filters (in the following order): None
2024-02-23 20:58:27.7173 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 20:58:27.7173 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 20:58:27.9121 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 20:58:27.9283 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 20:58:27.9283 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 20:58:27.9283 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 20:58:27.9868 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000001": started reading request body.
2024-02-23 20:58:27.9868 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000001": done reading request body.
2024-02-23 20:58:28.0173 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 20:58:28.0173 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:58:28.0173 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:58:28.0173 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 20:58:28.0393 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:58:28.0524 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:58:28.0524 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:58:28.0524 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:58:28.0524 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:58:28.0524 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 20:58:28.0990 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 20:58:28.0990 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 20:58:28.8995 An 'IServiceProvider' was created for internal use by Entity Framework.
2024-02-23 20:58:30.5645 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:30.9476 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:30.9665 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:30.9665 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.4854 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.4903 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.4903 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.5025 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.5775 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:31.5775 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 20:58:33.4557 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 20:58:33.7484 Compiling query expression: 
'DbSet<BlockedUser>()
    .Where(x => !(x.IsBlockedInGroup) && x.BlockedById == __userId_0 && x.BlockedUserId == __model_ReceiverId_1 || x.BlockedById == __model_ReceiverId_1 && x.BlockedUserId == __userId_0)'
2024-02-23 20:58:34.6713 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<BlockedUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: BlockedUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: BlockedUser.BlockedById (long) Required FK Index, 1], [Property: BlockedUser.BlockedUserId (long) Required FK Index, 2], [Property: BlockedUser.CreatedBy (long) Required, 3], [Property: BlockedUser.CreatedDate (DateTime) Required, 4], [Property: BlockedUser.GroupId (long?) FK Index, 5], [Property: BlockedUser.IsActive (bool) Required, 6], [Property: BlockedUser.IsBlockedInGroup (bool) Required, 7], [Property: BlockedUser.IsDeleted (bool) Required, 8], [Property: BlockedUser.UpdatedBy (long?), 9], [Property: BlockedUser.UpdatedDate (DateTime?), 10] }
        SELECT b.Id, b.BlockedById, b.BlockedUserId, b.CreatedBy, b.CreatedDate, b.GroupId, b.IsActive, b.IsBlockedInGroup, b.IsDeleted, b.UpdatedBy, b.UpdatedDate
        FROM BlockedUsers AS b
        WHERE Not(b.IsBlockedInGroup) && (((b.BlockedById == @__userId_0) && (b.BlockedUserId == @__model_ReceiverId_1)) || ((b.BlockedById == @__model_ReceiverId_1) && (b.BlockedUserId == @__userId_0)))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, BlockedUser>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 20:58:34.8720 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:58:34.8720 Creating DbConnection.
2024-02-23 20:58:35.0501 Created DbConnection. (159ms).
2024-02-23 20:58:35.0878 Created DbCommand for 'ExecuteReader' (204ms).
2024-02-23 20:58:35.1332 Initialized DbCommand for 'ExecuteReader' (267ms).
2024-02-23 20:58:35.1483 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:36.4693 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:36.5181 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 20:58:36.8243 Executed DbCommand (302ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 20:58:36.9328 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:36.9769 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 119ms reading results.
2024-02-23 20:58:36.9932 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:37.0218 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (31ms).
2024-02-23 20:58:37.2447 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:58:37.6131 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:58:37.6131 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 20:58:37.6447 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 20:58:37.7063 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 20:58:38.0222 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.0222 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.0388 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:58:38.0388 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:58:38.0388 Initialized DbCommand for 'ExecuteReader' (6ms).
2024-02-23 20:58:38.0388 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 20:58:38.1161 Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 20:58:38.1814 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 20:58:38.2145 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.2145 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 98ms reading results.
2024-02-23 20:58:38.2223 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.2223 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 20:58:38.2778 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:58:38.2867 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 20:58:38.3301 Compiling query expression: 
'DbSet<Chat>()
    .Include(x => x.Sender)
    .Include(x => x.Receiver)
    .Where(x => x.Id == __com_Id_0)
    .Select(x => new ChatNotificationDto{ 
        Id = x.Id, 
        SenderId = x.SenderId, 
        SenderName = x.Sender.Name, 
        ReceiverId = x.ReceiverId, 
        ReceiverName = x.Receiver.Name, 
        Message = x.Message, 
        Attachments = x.ChatAttachments
            .Select(att => new ChatAttachmentNoticationDto{ 
                Id = att.Id, 
                MediaType = att.MediaType, 
                Name = att.Name, 
                AttachmentUrl = att.AttachmentUrl, 
                ChatId = att.ChatId 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()'
2024-02-23 20:58:38.8793 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ChatNotificationDto>(
    asyncEnumerable: new SingleQueryingEnumerable<ChatNotificationDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
                11 -> 11
                12 -> 12
            SELECT t.Id, t.SenderId, t.Name, t.ReceiverId, t.Name0, t.Message, t.Id0, t.Id1, c0.Id, c0.MediaType, c0.Name, c0.AttachmentUrl, c0.ChatId
            FROM 
            (
                SELECT TOP(1) c.Id, c.SenderId, u.Name, c.ReceiverId, u0.Name AS Name0, c.Message, u.Id AS Id0, u0.Id AS Id1
                FROM Chats AS c
                INNER JOIN Users AS u ON c.SenderId == u.Id
                INNER JOIN Users AS u0 ON c.ReceiverId == u0.Id
                WHERE c.Id == @__com_Id_0
            ) AS t
            LEFT JOIN ChatAttachments AS c0 ON t.Id == c0.ChatId
            ORDER BY t.Id ASC, t.Id0 ASC, t.Id1 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ChatNotificationDto>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 20:58:38.9086 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:58:38.9086 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:58:38.9086 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:58:38.9086 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.9086 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:38.9086 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 20:58:39.0823 Executed DbCommand (154ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 20:58:39.1189 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:39.1189 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 36ms reading results.
2024-02-23 20:58:39.1189 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:39.1189 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 20:58:39.1464 Sending payload: 171 bytes.
2024-02-23 20:58:39.1666 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11054.2379ms.
2024-02-23 20:58:39.1666 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 20:58:39.1666 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:58:39.1666 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:58:39.1770 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:58:39.1770 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:58:39.1770 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:58:39.1770 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:58:39.1770 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 20:58:39.1955 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 20:58:39.2124 No information found on request to perform content negotiation.
2024-02-23 20:58:39.2124 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 20:58:39.2124 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 20:58:39.2124 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 20:58:39.2205 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 20:58:39.2417 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 20:58:39.2417 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:58:39.2417 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:58:39.2610 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 11527.1917ms
2024-02-23 20:58:39.2610 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:58:39.2610 Connection id "0HN1KGV1FR82O" completed keep alive response.
2024-02-23 20:58:39.2714 'UserInteractionDbContext' disposed.
2024-02-23 20:58:39.2910 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:58:39.2910 Disposed connection to database '' on server '' (5ms).
2024-02-23 20:58:39.2910 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73 - 200 - application/json;+charset=utf-8 12551.4297ms
2024-02-23 20:58:40.9327 Sent a ping message to the client.
2024-02-23 20:58:40.9327 Sending payload: 11 bytes.
2024-02-23 20:58:41.1751 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:58:56.9236 Sent a ping message to the client.
2024-02-23 20:58:56.9236 Sending payload: 11 bytes.
2024-02-23 20:58:57.2703 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:59:12.9347 Sent a ping message to the client.
2024-02-23 20:59:12.9347 Sending payload: 11 bytes.
2024-02-23 20:59:13.0618 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:59:25.2002 Connection id "0HN1KGV1FR82N" received FIN.
2024-02-23 20:59:25.2002 Waiting for the application to finish sending data.
2024-02-23 20:59:25.2161 Connection id "0HN1KGV1FR82N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 20:59:25.2161 Sending payload: 33 bytes.
2024-02-23 20:59:25.2161 Connection id "0HN1KGV1FR82N" disconnecting.
2024-02-23 20:59:25.2161 OnConnectedAsync ending.
2024-02-23 20:59:25.2161 Socket closed.
2024-02-23 20:59:25.2161 Disposing connection qHG0l7gwWpGDaqIBYqcPGA.
2024-02-23 20:59:25.2380 Waiting for WebSockets transport to complete.
2024-02-23 20:59:25.2380 WebSockets transport complete.
2024-02-23 20:59:25.2380 Removing connection 2v4S773fJ3tTXw4fMUzRhw from the list of connections.
2024-02-23 20:59:25.2380 Executed endpoint '/ConnectionHub'
2024-02-23 20:59:25.2380 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=2v4S773fJ3tTXw4fMUzRhw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 75414.1543ms
2024-02-23 20:59:25.2380 Connection id "0HN1KGV1FR82N" stopped.
2024-02-23 20:59:27.5885 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 20:59:27.5885 All hosts are allowed.
2024-02-23 20:59:27.5885 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 20:59:27.5885 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 20:59:27.5885 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:59:27.5885 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:59:27.5885 CORS policy execution successful.
2024-02-23 20:59:27.5885 The request is a preflight request.
2024-02-23 20:59:27.5885 Connection id "0HN1KGV1FR82K" completed keep alive response.
2024-02-23 20:59:27.5885 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 1.5477ms
2024-02-23 20:59:27.5885 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 20:59:27.5885 All hosts are allowed.
2024-02-23 20:59:27.5885 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 20:59:27.5885 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 20:59:27.5885 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:59:27.5885 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:59:27.5885 CORS policy execution successful.
2024-02-23 20:59:27.5885 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 20:59:27.6102 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 20:59:27.6102 New connection mMnUz6Gc9ISN7wzyaUHcJA created.
2024-02-23 20:59:27.6102 Sending negotiation response.
2024-02-23 20:59:27.6102 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 20:59:27.6102 Connection id "0HN1KGV1FR82L" completed keep alive response.
2024-02-23 20:59:27.6102 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 16.1964ms
2024-02-23 20:59:27.6796 Connection id "0HN1KGV1FR82P" accepted.
2024-02-23 20:59:27.6824 Connection id "0HN1KGV1FR82P" started.
2024-02-23 20:59:27.6824 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=8eV-Ug7Ve0YKha6hw6t-EA&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 20:59:27.6824 All hosts are allowed.
2024-02-23 20:59:27.6824 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 20:59:27.6824 Request matched endpoint '/ConnectionHub'
2024-02-23 20:59:27.6824 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:59:27.6824 The request has an origin header: 'http://localhost:4200'.
2024-02-23 20:59:27.6824 CORS policy execution successful.
2024-02-23 20:59:27.6824 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 20:59:27.6824 Executing endpoint '/ConnectionHub'
2024-02-23 20:59:27.6824 Establishing new connection.
2024-02-23 20:59:27.6824 OnConnectedAsync started.
2024-02-23 20:59:27.6824 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 20:59:27.6990 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 20:59:27.6990 Found protocol implementation for requested protocol: json.
2024-02-23 20:59:27.6990 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 20:59:27.6990 Sending payload: 3 bytes.
2024-02-23 20:59:27.6990 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:59:27.7119 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 20:59:27.7119 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 20:59:27.7119 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 20:59:27.7119 Sending payload: 64 bytes.
2024-02-23 20:59:37.7141 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73
2024-02-23 20:59:37.7141 All hosts are allowed.
2024-02-23 20:59:37.7242 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 20:59:37.7242 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 20:59:37.7242 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:59:37.7242 Static files was skipped as the request already matched an endpoint.
2024-02-23 20:59:37.7242 The request has an origin header: 'http://localhost:5107'.
2024-02-23 20:59:37.7242 CORS policy execution failed.
2024-02-23 20:59:37.7242 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 20:59:37.7242 Successfully validated the token.
2024-02-23 20:59:37.7242 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 20:59:37.7347 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 20:59:37.7347 Authorization was successful.
2024-02-23 20:59:37.7347 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:59:37.7347 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 20:59:37.7347 Execution plan of authorization filters (in the following order): None
2024-02-23 20:59:37.7347 Execution plan of resource filters (in the following order): None
2024-02-23 20:59:37.7347 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 20:59:37.7347 Execution plan of exception filters (in the following order): None
2024-02-23 20:59:37.7347 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 20:59:37.7347 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 20:59:37.7347 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 20:59:37.7501 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 20:59:37.7501 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 20:59:37.7501 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 20:59:37.7501 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000002": started reading request body.
2024-02-23 20:59:37.7501 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000002": done reading request body.
2024-02-23 20:59:37.7501 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 20:59:37.7501 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:59:37.7501 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:59:37.7501 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 20:59:37.7501 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 20:59:37.7501 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:59:37.7501 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:59:37.7501 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:59:37.7501 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:59:37.7501 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 20:59:37.7501 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 20:59:37.7501 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 20:59:37.8440 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 20:59:37.8580 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:59:37.8586 Creating DbConnection.
2024-02-23 20:59:37.8586 Created DbConnection. (0ms).
2024-02-23 20:59:37.8586 Created DbCommand for 'ExecuteReader' (1ms).
2024-02-23 20:59:37.8586 Initialized DbCommand for 'ExecuteReader' (1ms).
2024-02-23 20:59:37.8586 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.8586 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.8586 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 20:59:37.8896 Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 20:59:37.8896 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.8896 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 20:59:37.8896 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.8896 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 20:59:37.8896 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:59:37.8896 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:59:37.8896 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 20:59:37.9069 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 20:59:37.9069 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 20:59:37.9069 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.9069 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.9069 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:59:37.9069 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:59:37.9069 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:59:37.9069 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 20:59:37.9917 Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 20:59:37.9917 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 20:59:37.9917 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.9917 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 3ms reading results.
2024-02-23 20:59:37.9917 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:37.9917 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 20:59:37.9917 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 20:59:37.9917 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 20:59:38.0098 Creating DbCommand for 'ExecuteReader'.
2024-02-23 20:59:38.0098 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:59:38.0098 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 20:59:38.0098 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:38.0098 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:38.0098 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 20:59:38.0558 Executed DbCommand (31ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 20:59:38.0558 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:38.0558 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 1ms reading results.
2024-02-23 20:59:38.0558 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:38.0558 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 20:59:38.0558 Sending payload: 171 bytes.
2024-02-23 20:59:38.0558 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 298.5902ms.
2024-02-23 20:59:38.0558 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 20:59:38.0558 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:59:38.0558 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 20:59:38.0558 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:59:38.0558 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 20:59:38.0558 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:59:38.0558 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:59:38.0558 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 20:59:38.0558 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 20:59:38.0558 No information found on request to perform content negotiation.
2024-02-23 20:59:38.0558 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 20:59:38.0558 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 20:59:38.0558 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 20:59:38.0558 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 20:59:38.0558 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 20:59:38.0558 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:59:38.0558 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 20:59:38.0558 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 317.1296ms
2024-02-23 20:59:38.0558 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 20:59:38.0558 Connection id "0HN1KGV1FR82O" completed keep alive response.
2024-02-23 20:59:38.0633 'UserInteractionDbContext' disposed.
2024-02-23 20:59:38.0633 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 20:59:38.0633 Disposed connection to database '' on server '' (4ms).
2024-02-23 20:59:38.0633 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73 - 200 - application/json;+charset=utf-8 357.3158ms
2024-02-23 20:59:42.9261 Sent a ping message to the client.
2024-02-23 20:59:42.9261 Sending payload: 11 bytes.
2024-02-23 20:59:52.5908 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 20:59:57.9437 Sent a ping message to the client.
2024-02-23 20:59:57.9437 Sending payload: 11 bytes.
2024-02-23 21:00:07.5713 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:00:13.9346 Sent a ping message to the client.
2024-02-23 21:00:13.9346 Sending payload: 11 bytes.
2024-02-23 21:00:18.6648 Connection id "0HN1KGV1FR82P" received FIN.
2024-02-23 21:00:18.6648 Connection id "0HN1KGV1FR82P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 21:00:18.6648 Connection id "0HN1KGV1FR82P" disconnecting.
2024-02-23 21:00:18.6648 Sending payload: 33 bytes.
2024-02-23 21:00:18.6648 Waiting for the application to finish sending data.
2024-02-23 21:00:18.6648 OnConnectedAsync ending.
2024-02-23 21:00:18.6648 Socket closed.
2024-02-23 21:00:18.6648 Disposing connection mMnUz6Gc9ISN7wzyaUHcJA.
2024-02-23 21:00:18.6648 Waiting for WebSockets transport to complete.
2024-02-23 21:00:18.6743 WebSockets transport complete.
2024-02-23 21:00:18.6743 Removing connection 8eV-Ug7Ve0YKha6hw6t-EA from the list of connections.
2024-02-23 21:00:18.6743 Executed endpoint '/ConnectionHub'
2024-02-23 21:00:18.6743 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=8eV-Ug7Ve0YKha6hw6t-EA&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 50992.1833ms
2024-02-23 21:00:18.6743 Connection id "0HN1KGV1FR82P" stopped.
2024-02-23 21:00:21.5049 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 21:00:21.5049 All hosts are allowed.
2024-02-23 21:00:21.5049 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5049 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5049 Static files was skipped as the request already matched an endpoint.
2024-02-23 21:00:21.5049 The request has an origin header: 'http://localhost:4200'.
2024-02-23 21:00:21.5049 CORS policy execution successful.
2024-02-23 21:00:21.5049 The request is a preflight request.
2024-02-23 21:00:21.5049 Connection id "0HN1KGV1FR82K" completed keep alive response.
2024-02-23 21:00:21.5049 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 2.7378ms
2024-02-23 21:00:21.5049 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 21:00:21.5049 All hosts are allowed.
2024-02-23 21:00:21.5049 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5049 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5049 Static files was skipped as the request already matched an endpoint.
2024-02-23 21:00:21.5049 The request has an origin header: 'http://localhost:4200'.
2024-02-23 21:00:21.5049 CORS policy execution successful.
2024-02-23 21:00:21.5146 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 21:00:21.5146 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5146 New connection 9u2TPT6AVo2pYf1imMVkxA created.
2024-02-23 21:00:21.5146 Sending negotiation response.
2024-02-23 21:00:21.5146 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 21:00:21.5146 Connection id "0HN1KGV1FR82L" completed keep alive response.
2024-02-23 21:00:21.5146 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 7.2434ms
2024-02-23 21:00:21.6397 Connection id "0HN1KGV1FR82Q" accepted.
2024-02-23 21:00:21.6397 Connection id "0HN1KGV1FR82Q" started.
2024-02-23 21:00:21.6397 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=wyw3-dvbmVNhGSC2VJ92Xw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 21:00:21.6397 All hosts are allowed.
2024-02-23 21:00:21.6397 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 21:00:21.6397 Request matched endpoint '/ConnectionHub'
2024-02-23 21:00:21.6397 Static files was skipped as the request already matched an endpoint.
2024-02-23 21:00:21.6397 The request has an origin header: 'http://localhost:4200'.
2024-02-23 21:00:21.6397 CORS policy execution successful.
2024-02-23 21:00:21.6397 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 21:00:21.6397 Executing endpoint '/ConnectionHub'
2024-02-23 21:00:21.6397 Establishing new connection.
2024-02-23 21:00:21.6397 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 21:00:21.6397 OnConnectedAsync started.
2024-02-23 21:00:21.6631 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 21:00:21.6631 Found protocol implementation for requested protocol: json.
2024-02-23 21:00:21.6631 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 21:00:21.6631 Sending payload: 3 bytes.
2024-02-23 21:00:21.6726 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:00:21.6726 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 21:00:21.6726 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 21:00:21.6726 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 21:00:21.6726 Sending payload: 64 bytes.
2024-02-23 21:00:36.7460 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:00:36.9305 Sent a ping message to the client.
2024-02-23 21:00:36.9305 Sending payload: 11 bytes.
2024-02-23 21:00:45.9080 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73
2024-02-23 21:00:45.9080 All hosts are allowed.
2024-02-23 21:00:45.9080 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 21:00:45.9080 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 21:00:45.9080 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:00:45.9080 Static files was skipped as the request already matched an endpoint.
2024-02-23 21:00:45.9080 The request has an origin header: 'http://localhost:5107'.
2024-02-23 21:00:45.9080 CORS policy execution failed.
2024-02-23 21:00:45.9080 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 21:00:45.9080 Successfully validated the token.
2024-02-23 21:00:45.9080 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 21:00:45.9080 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 21:00:45.9080 Authorization was successful.
2024-02-23 21:00:45.9080 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:00:45.9226 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 21:00:45.9226 Execution plan of authorization filters (in the following order): None
2024-02-23 21:00:45.9226 Execution plan of resource filters (in the following order): None
2024-02-23 21:00:45.9226 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 21:00:45.9226 Execution plan of exception filters (in the following order): None
2024-02-23 21:00:45.9226 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 21:00:45.9226 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 21:00:45.9226 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 21:00:45.9226 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 21:00:45.9226 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 21:00:45.9226 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 21:00:45.9226 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000003": started reading request body.
2024-02-23 21:00:45.9226 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000003": done reading request body.
2024-02-23 21:00:45.9226 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 21:00:45.9226 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:00:45.9226 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:00:45.9226 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 21:00:45.9226 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:00:45.9226 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:00:45.9226 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:00:45.9226 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:00:45.9226 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:00:45.9226 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 21:00:45.9226 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 21:00:45.9226 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 21:00:46.1952 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 21:00:46.1952 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:00:46.1952 Creating DbConnection.
2024-02-23 21:00:46.1952 Created DbConnection. (0ms).
2024-02-23 21:00:46.1952 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.1952 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.1952 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.1952 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.1952 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 21:00:46.2383 Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 21:00:46.2383 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.2383 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 9ms reading results.
2024-02-23 21:00:46.2383 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.2383 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:00:46.2383 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:00:46.2383 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:00:46.2383 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 21:00:46.2383 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 21:00:46.2383 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 21:00:46.2383 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.2383 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.2383 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:00:46.2383 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.2383 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.2383 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 21:00:46.3202 Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 21:00:46.3202 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 21:00:46.3202 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3202 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 21:00:46.3202 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3202 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:00:46.3202 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:00:46.3202 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 21:00:46.3202 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:00:46.3202 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.3202 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:00:46.3202 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3202 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3202 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 21:00:46.3528 Executed DbCommand (15ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 21:00:46.3528 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3528 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 21:00:46.3528 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3528 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:00:46.3528 Sending payload: 171 bytes.
2024-02-23 21:00:46.3528 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 427.9918ms.
2024-02-23 21:00:46.3528 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 21:00:46.3528 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:00:46.3528 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:00:46.3528 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:00:46.3528 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:00:46.3528 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:00:46.3528 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:00:46.3528 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 21:00:46.3528 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 21:00:46.3528 No information found on request to perform content negotiation.
2024-02-23 21:00:46.3528 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 21:00:46.3528 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 21:00:46.3528 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 21:00:46.3528 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 21:00:46.3528 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 21:00:46.3528 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:00:46.3528 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:00:46.3528 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 434.2869ms
2024-02-23 21:00:46.3528 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:00:46.3528 Connection id "0HN1KGV1FR82O" completed keep alive response.
2024-02-23 21:00:46.3528 'UserInteractionDbContext' disposed.
2024-02-23 21:00:46.3528 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:00:46.3528 Disposed connection to database '' on server '' (0ms).
2024-02-23 21:00:46.3528 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 73 - 200 - application/json;+charset=utf-8 451.0069ms
2024-02-23 21:00:52.9378 Sent a ping message to the client.
2024-02-23 21:00:52.9378 Sending payload: 11 bytes.
2024-02-23 21:01:08.9292 Sent a ping message to the client.
2024-02-23 21:01:08.9292 Sending payload: 11 bytes.
2024-02-23 21:01:11.8448 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:01:24.9293 Sent a ping message to the client.
2024-02-23 21:01:24.9293 Sending payload: 11 bytes.
2024-02-23 21:01:27.1714 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:01:37.1179 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 72
2024-02-23 21:01:37.1179 All hosts are allowed.
2024-02-23 21:01:37.1179 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 21:01:37.1179 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 21:01:37.1179 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:01:37.1179 Static files was skipped as the request already matched an endpoint.
2024-02-23 21:01:37.1179 The request has an origin header: 'http://localhost:5107'.
2024-02-23 21:01:37.1179 CORS policy execution failed.
2024-02-23 21:01:37.1179 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 21:01:37.1179 Successfully validated the token.
2024-02-23 21:01:37.1179 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 21:01:37.1179 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 21:01:37.1179 Authorization was successful.
2024-02-23 21:01:37.1179 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:01:37.1276 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 21:01:37.1276 Execution plan of authorization filters (in the following order): None
2024-02-23 21:01:37.1276 Execution plan of resource filters (in the following order): None
2024-02-23 21:01:37.1276 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 21:01:37.1276 Execution plan of exception filters (in the following order): None
2024-02-23 21:01:37.1276 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 21:01:37.1276 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 21:01:37.1276 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 21:01:37.1276 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 21:01:37.1276 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 21:01:37.1276 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 21:01:37.1276 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000004": started reading request body.
2024-02-23 21:01:37.1276 Connection id "0HN1KGV1FR82O", Request id "0HN1KGV1FR82O:00000004": done reading request body.
2024-02-23 21:01:37.1276 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 21:01:37.1276 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:01:37.1276 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:01:37.1276 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 21:01:37.1276 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 21:01:37.1276 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:01:37.1276 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:01:37.1276 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:01:37.1276 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:01:37.1276 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 21:01:37.1276 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 21:01:37.1276 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 21:01:37.1276 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 21:01:37.1276 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:01:37.1276 Creating DbConnection.
2024-02-23 21:01:37.1276 Created DbConnection. (0ms).
2024-02-23 21:01:37.1276 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.1276 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.1276 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.1276 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.1276 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 21:01:37.1855 Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 21:01:37.1855 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.1855 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 21:01:37.1855 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.1855 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:01:37.1870 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:01:37.1870 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:01:37.1870 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 21:01:37.1870 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 21:01:37.1870 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 21:01:37.2063 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2063 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2063 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:01:37.2063 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.2063 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.2063 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 21:01:37.2342 Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 21:01:37.2342 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 21:01:37.2342 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2342 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 21:01:37.2342 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2342 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:01:37.2342 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 21:01:37.2342 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 21:01:37.2342 Creating DbCommand for 'ExecuteReader'.
2024-02-23 21:01:37.2342 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.2342 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 21:01:37.2342 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2342 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2342 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 21:01:37.2545 Executed DbCommand (5ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 21:01:37.2545 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2545 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 21:01:37.2545 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2545 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 21:01:37.2588 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 128.2541ms.
2024-02-23 21:01:37.2588 Sending payload: 170 bytes.
2024-02-23 21:01:37.2588 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 21:01:37.2588 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:01:37.2588 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 21:01:37.2588 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:01:37.2588 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 21:01:37.2588 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:01:37.2588 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:01:37.2588 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 21:01:37.2588 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 21:01:37.2588 No information found on request to perform content negotiation.
2024-02-23 21:01:37.2588 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 21:01:37.2588 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 21:01:37.2588 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 21:01:37.2588 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 21:01:37.2588 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 21:01:37.2588 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:01:37.2588 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 21:01:37.2588 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 133.0536ms
2024-02-23 21:01:37.2588 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 21:01:37.2588 Connection id "0HN1KGV1FR82O" completed keep alive response.
2024-02-23 21:01:37.2588 'UserInteractionDbContext' disposed.
2024-02-23 21:01:37.2588 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 21:01:37.2588 Disposed connection to database '' on server '' (0ms).
2024-02-23 21:01:37.2588 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 72 - 200 - application/json;+charset=utf-8 144.6866ms
2024-02-23 21:01:40.9301 Sent a ping message to the client.
2024-02-23 21:01:40.9301 Sending payload: 11 bytes.
2024-02-23 21:01:42.1823 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:01:56.9335 Sent a ping message to the client.
2024-02-23 21:01:56.9335 Sending payload: 11 bytes.
2024-02-23 21:01:57.1824 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:02:12.9390 Sent a ping message to the client.
2024-02-23 21:02:12.9390 Sending payload: 11 bytes.
2024-02-23 21:02:12.9390 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:02:28.9257 Sent a ping message to the client.
2024-02-23 21:02:28.9257 Sending payload: 11 bytes.
2024-02-23 21:02:28.9257 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:02:43.9389 Sent a ping message to the client.
2024-02-23 21:02:43.9389 Sending payload: 11 bytes.
2024-02-23 21:02:43.9389 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:02:59.9316 Sent a ping message to the client.
2024-02-23 21:02:59.9316 Sending payload: 11 bytes.
2024-02-23 21:02:59.9316 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:03:15.9354 Sent a ping message to the client.
2024-02-23 21:03:15.9354 Sending payload: 11 bytes.
2024-02-23 21:03:15.9390 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 21:03:26.8480 Connection id "0HN1KGV1FR82Q" received FIN.
2024-02-23 21:03:26.8480 Waiting for the application to finish sending data.
2024-02-23 21:03:26.8480 Connection id "0HN1KGV1FR82Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 21:03:26.8480 Connection id "0HN1KGV1FR82Q" disconnecting.
2024-02-23 21:03:26.8480 Socket closed.
2024-02-23 21:03:26.8480 Disposing connection 9u2TPT6AVo2pYf1imMVkxA.
2024-02-23 21:03:26.8480 Waiting for application to complete.
2024-02-23 21:03:26.8798 OnConnectedAsync ending.
2024-02-23 21:03:26.8798 Application complete.
2024-02-23 21:03:26.8798 Removing connection wyw3-dvbmVNhGSC2VJ92Xw from the list of connections.
2024-02-23 21:03:26.8798 Executed endpoint '/ConnectionHub'
2024-02-23 21:03:26.8943 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=wyw3-dvbmVNhGSC2VJ92Xw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 185251.6980ms
2024-02-23 21:03:26.8943 Connection id "0HN1KGV1FR82Q" stopped.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82L" received FIN.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82K" received FIN.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82L" disconnecting.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82K" disconnecting.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82K" stopped.
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 21:03:27.1288 Connection id "0HN1KGV1FR82L" stopped.
2024-02-23 21:03:27.1409 Connection id "0HN1KGV1FR82L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 21:03:30.2503 Connection id "0HN1KGV1FR82O" received FIN.
2024-02-23 21:03:30.2503 Connection id "0HN1KGV1FR82O" disconnecting.
2024-02-23 21:03:30.2503 Connection id "0HN1KGV1FR82O" stopped.
2024-02-23 21:03:30.2989 Connection id "0HN1KGV1FR82O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:00:54.2016 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:00:54.3250 New connection Ql7D-MYs5ivyMLko06S4Kg created.
2024-02-23 22:00:54.3747 Sending negotiation response.
2024-02-23 22:00:54.3795 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:00:54.3795 Connection id "0HN1KI3JO7SER" completed keep alive response.
2024-02-23 22:00:54.4557 Connection id "0HN1KI3JO7SES" accepted.
2024-02-23 22:00:54.4557 Connection id "0HN1KI3JO7SES" started.
2024-02-23 22:00:54.4557 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=1uZlIJvH3Z8G6ipALZ0guw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:00:54.4557 All hosts are allowed.
2024-02-23 22:00:54.4757 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:00:54.4757 Request matched endpoint '/ConnectionHub'
2024-02-23 22:00:54.4757 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:00:54.4757 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:00:54.4757 CORS policy execution successful.
2024-02-23 22:00:54.4899 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:00:54.5363 Executing endpoint '/ConnectionHub'
2024-02-23 22:00:54.5614 Establishing new connection.
2024-02-23 22:00:54.5961 OnConnectedAsync started.
2024-02-23 22:00:54.8493 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:00:55.2891 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:00:55.2891 Found protocol implementation for requested protocol: json.
2024-02-23 22:00:55.3026 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:00:55.3026 Sending payload: 3 bytes.
2024-02-23 22:00:55.4358 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:00:55.4491 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:00:55.4667 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:00:55.4997 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:00:55.5096 Sending payload: 64 bytes.
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEO" received FIN.
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEP" received FIN.
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEO" disconnecting.
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:00:57.1901 Connection id "0HN1KI3JO7SEP" disconnecting.
2024-02-23 22:00:57.1986 Connection id "0HN1KI3JO7SEP" stopped.
2024-02-23 22:00:57.1986 Connection id "0HN1KI3JO7SEO" stopped.
2024-02-23 22:01:10.0126 Sending payload: 11 bytes.
2024-02-23 22:01:10.0126 Sent a ping message to the client.
2024-02-23 22:01:11.2458 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SER" received FIN.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SEQ" received FIN.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SER" disconnecting.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SER" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SEQ" disconnecting.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SER" stopped.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SEQ" stopped.
2024-02-23 22:01:24.2999 Connection id "0HN1KI3JO7SEQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:01:25.0235 Sent a ping message to the client.
2024-02-23 22:01:25.0235 Sending payload: 11 bytes.
2024-02-23 22:01:27.2600 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:01:41.0057 Sent a ping message to the client.
2024-02-23 22:01:41.0057 Sending payload: 11 bytes.
2024-02-23 22:01:43.2565 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:01:56.0150 Sent a ping message to the client.
2024-02-23 22:01:56.0150 Sending payload: 11 bytes.
2024-02-23 22:01:59.2518 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:02:12.0124 Sent a ping message to the client.
2024-02-23 22:02:12.0124 Sending payload: 11 bytes.
2024-02-23 22:02:15.2451 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:02:28.0228 Sent a ping message to the client.
2024-02-23 22:02:28.0228 Sending payload: 11 bytes.
2024-02-23 22:02:31.2631 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:02:44.0159 Sent a ping message to the client.
2024-02-23 22:02:44.0159 Sending payload: 11 bytes.
2024-02-23 22:02:47.2478 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:03:00.0064 Sent a ping message to the client.
2024-02-23 22:03:00.0064 Sending payload: 11 bytes.
2024-02-23 22:03:03.2481 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:03:16.0081 Sent a ping message to the client.
2024-02-23 22:03:16.0081 Sending payload: 11 bytes.
2024-02-23 22:03:19.2555 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:03:31.0973 Sent a ping message to the client.
2024-02-23 22:03:31.0977 Sending payload: 11 bytes.
2024-02-23 22:03:35.2648 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:03:42.8325 Connection id "0HN1KI3JO7SES" received FIN.
2024-02-23 22:03:42.8325 Connection id "0HN1KI3JO7SES" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:03:42.8325 Connection id "0HN1KI3JO7SES" disconnecting.
2024-02-23 22:03:42.8754 Waiting for the application to finish sending data.
2024-02-23 22:03:42.8942 Socket closed.
2024-02-23 22:03:42.9089 Disposing connection Ql7D-MYs5ivyMLko06S4Kg.
2024-02-23 22:03:42.9129 Waiting for application to complete.
2024-02-23 22:03:42.9129 OnConnectedAsync ending.
2024-02-23 22:03:42.9535 Application complete.
2024-02-23 22:03:43.0127 Removing connection 1uZlIJvH3Z8G6ipALZ0guw from the list of connections.
2024-02-23 22:03:43.0569 Executed endpoint '/ConnectionHub'
2024-02-23 22:03:43.0754 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=1uZlIJvH3Z8G6ipALZ0guw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 168610.0670ms
2024-02-23 22:03:43.0784 Connection id "0HN1KI3JO7SES" stopped.
2024-02-23 22:03:45.0944 Connection id "0HN1KI3JO7SET" accepted.
2024-02-23 22:03:45.0944 Connection id "0HN1KI3JO7SET" started.
2024-02-23 22:03:45.0944 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 22:03:45.0944 All hosts are allowed.
2024-02-23 22:03:45.0944 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:03:45.0944 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:03:45.0944 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:03:45.0944 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:03:45.0944 CORS policy execution successful.
2024-02-23 22:03:45.0944 The request is a preflight request.
2024-02-23 22:03:45.1179 Connection id "0HN1KI3JO7SET" completed keep alive response.
2024-02-23 22:03:45.1179 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 17.9448ms
2024-02-23 22:03:45.1346 Connection id "0HN1KI3JO7SEU" accepted.
2024-02-23 22:03:45.1346 Connection id "0HN1KI3JO7SEU" started.
2024-02-23 22:03:45.1346 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 22:03:45.1346 All hosts are allowed.
2024-02-23 22:03:45.1346 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:03:45.1346 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:03:45.1402 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:03:45.1402 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:03:45.1402 CORS policy execution successful.
2024-02-23 22:03:45.1402 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 22:03:45.1587 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:03:45.1587 New connection cGJWmgvbxM1uJGzNbu9-lQ created.
2024-02-23 22:03:45.1587 Sending negotiation response.
2024-02-23 22:03:45.1587 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:03:45.1587 Connection id "0HN1KI3JO7SEU" completed keep alive response.
2024-02-23 22:03:45.1587 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 24.1643ms
2024-02-23 22:03:45.2187 Connection id "0HN1KI3JO7SEV" accepted.
2024-02-23 22:03:45.2187 Connection id "0HN1KI3JO7SEV" started.
2024-02-23 22:03:45.2187 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=98wC_FOwfbLFHht5F0_d2g&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:03:45.2187 All hosts are allowed.
2024-02-23 22:03:45.2187 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:03:45.2187 Request matched endpoint '/ConnectionHub'
2024-02-23 22:03:45.2187 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:03:45.2187 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:03:45.2187 CORS policy execution successful.
2024-02-23 22:03:45.2187 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:03:45.2187 Executing endpoint '/ConnectionHub'
2024-02-23 22:03:45.2187 Establishing new connection.
2024-02-23 22:03:45.2187 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:03:45.2380 OnConnectedAsync started.
2024-02-23 22:03:45.3061 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:03:45.3061 Found protocol implementation for requested protocol: json.
2024-02-23 22:03:45.3061 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:03:45.3120 Sending payload: 3 bytes.
2024-02-23 22:03:45.3465 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:03:45.4030 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:03:45.4104 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:03:45.4104 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:03:45.4104 Sending payload: 64 bytes.
2024-02-23 22:04:01.0764 Sent a ping message to the client.
2024-02-23 22:04:01.0776 Sending payload: 11 bytes.
2024-02-23 22:04:01.3150 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:04:04.7948 Connection id "0HN1KI3JO7SEV" received FIN.
2024-02-23 22:04:04.8045 Waiting for the application to finish sending data.
2024-02-23 22:04:04.8045 Connection id "0HN1KI3JO7SEV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:04:04.8045 Connection id "0HN1KI3JO7SEV" disconnecting.
2024-02-23 22:04:04.8045 Socket closed.
2024-02-23 22:04:04.8045 Disposing connection cGJWmgvbxM1uJGzNbu9-lQ.
2024-02-23 22:04:04.8045 Waiting for application to complete.
2024-02-23 22:04:04.8116 OnConnectedAsync ending.
2024-02-23 22:04:04.8116 Application complete.
2024-02-23 22:04:04.8116 Removing connection 98wC_FOwfbLFHht5F0_d2g from the list of connections.
2024-02-23 22:04:04.8116 Executed endpoint '/ConnectionHub'
2024-02-23 22:04:04.8116 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=98wC_FOwfbLFHht5F0_d2g&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 19593.3830ms
2024-02-23 22:04:04.8116 Connection id "0HN1KI3JO7SEV" stopped.
2024-02-23 22:04:05.6853 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 22:04:05.6853 All hosts are allowed.
2024-02-23 22:04:05.6918 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:04:05.6918 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:04:05.6918 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:04:05.6918 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:04:05.6918 CORS policy execution successful.
2024-02-23 22:04:05.6918 The request is a preflight request.
2024-02-23 22:04:05.6918 Connection id "0HN1KI3JO7SET" completed keep alive response.
2024-02-23 22:04:05.6918 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 8.0413ms
2024-02-23 22:04:05.7233 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 22:04:05.7233 All hosts are allowed.
2024-02-23 22:04:05.7233 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:04:05.7233 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:04:05.7233 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:04:05.7233 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:04:05.7233 CORS policy execution successful.
2024-02-23 22:04:05.7233 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 22:04:05.9613 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:04:05.9613 New connection zNP7Bk5CsQ2dRjTtH7Zqeg created.
2024-02-23 22:04:05.9613 Sending negotiation response.
2024-02-23 22:04:05.9613 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:04:05.9613 Connection id "0HN1KI3JO7SEU" completed keep alive response.
2024-02-23 22:04:05.9613 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 242.2466ms
2024-02-23 22:04:06.0249 Connection id "0HN1KI3JO7SF0" accepted.
2024-02-23 22:04:06.0249 Connection id "0HN1KI3JO7SF0" started.
2024-02-23 22:04:06.0249 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=zca15wADEZ2ZaF_TztF0aQ&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:04:06.0249 All hosts are allowed.
2024-02-23 22:04:06.0249 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:04:06.0249 Request matched endpoint '/ConnectionHub'
2024-02-23 22:04:06.0249 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:04:06.0249 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:04:06.0249 CORS policy execution successful.
2024-02-23 22:04:06.0249 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:04:06.1570 Executing endpoint '/ConnectionHub'
2024-02-23 22:04:06.1570 Establishing new connection.
2024-02-23 22:04:06.1570 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:04:06.1732 OnConnectedAsync started.
2024-02-23 22:04:06.1928 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:04:06.1928 Found protocol implementation for requested protocol: json.
2024-02-23 22:04:06.1928 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:04:06.1928 Sending payload: 3 bytes.
2024-02-23 22:04:06.2118 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:04:06.2118 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:04:06.2228 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:04:06.2228 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:04:06.2228 Sending payload: 64 bytes.
2024-02-23 22:04:21.2151 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:04:22.0117 Sent a ping message to the client.
2024-02-23 22:04:22.0117 Sending payload: 11 bytes.
2024-02-23 22:04:36.2467 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:04:38.0095 Sent a ping message to the client.
2024-02-23 22:04:38.0095 Sending payload: 11 bytes.
2024-02-23 22:04:52.2541 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:04:53.0171 Sent a ping message to the client.
2024-02-23 22:04:53.0171 Sending payload: 11 bytes.
2024-02-23 22:05:07.2620 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:05:09.0080 Sent a ping message to the client.
2024-02-23 22:05:09.0080 Sending payload: 11 bytes.
2024-02-23 22:05:13.1033 Connection id "0HN1KI3JO7SF0" received FIN.
2024-02-23 22:05:13.1381 Waiting for the application to finish sending data.
2024-02-23 22:05:13.1381 Connection id "0HN1KI3JO7SF0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:05:13.1381 Connection id "0HN1KI3JO7SF0" disconnecting.
2024-02-23 22:05:13.1484 Socket closed.
2024-02-23 22:05:13.1484 Disposing connection zNP7Bk5CsQ2dRjTtH7Zqeg.
2024-02-23 22:05:13.1484 Waiting for application to complete.
2024-02-23 22:05:13.1562 OnConnectedAsync ending.
2024-02-23 22:05:13.1562 Application complete.
2024-02-23 22:05:13.1562 Removing connection zca15wADEZ2ZaF_TztF0aQ from the list of connections.
2024-02-23 22:05:13.1562 Executed endpoint '/ConnectionHub'
2024-02-23 22:05:13.1562 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=zca15wADEZ2ZaF_TztF0aQ&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 67130.4709ms
2024-02-23 22:05:13.1562 Connection id "0HN1KI3JO7SF0" stopped.
2024-02-23 22:05:15.1754 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 22:05:15.1754 All hosts are allowed.
2024-02-23 22:05:15.1754 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:05:15.1754 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:05:15.1754 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:05:15.1754 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:05:15.1754 CORS policy execution successful.
2024-02-23 22:05:15.1754 The request is a preflight request.
2024-02-23 22:05:15.1754 Connection id "0HN1KI3JO7SET" completed keep alive response.
2024-02-23 22:05:15.1754 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 1.5541ms
2024-02-23 22:05:15.1996 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 22:05:15.1996 All hosts are allowed.
2024-02-23 22:05:15.1996 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:05:15.1996 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:05:15.1996 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:05:15.1996 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:05:15.1996 CORS policy execution successful.
2024-02-23 22:05:15.1996 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 22:05:15.2756 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:05:15.2879 New connection 7v4rv-ELG80UoPgX9PqQ-Q created.
2024-02-23 22:05:15.2879 Sending negotiation response.
2024-02-23 22:05:15.2879 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:05:15.2879 Connection id "0HN1KI3JO7SEU" completed keep alive response.
2024-02-23 22:05:15.2879 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 93.6704ms
2024-02-23 22:05:15.3404 Connection id "0HN1KI3JO7SF1" accepted.
2024-02-23 22:05:15.3404 Connection id "0HN1KI3JO7SF1" started.
2024-02-23 22:05:15.3404 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=xGwxSkmsVsWOXg4aDMk1Zw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:05:15.3404 All hosts are allowed.
2024-02-23 22:05:15.3404 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:05:15.3404 Request matched endpoint '/ConnectionHub'
2024-02-23 22:05:15.3404 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:05:15.3404 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:05:15.3404 CORS policy execution successful.
2024-02-23 22:05:15.3404 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:05:15.3404 Executing endpoint '/ConnectionHub'
2024-02-23 22:05:15.3404 Establishing new connection.
2024-02-23 22:05:15.3404 OnConnectedAsync started.
2024-02-23 22:05:15.3404 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:05:15.3925 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:05:15.3944 Found protocol implementation for requested protocol: json.
2024-02-23 22:05:15.3944 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:05:15.3944 Sending payload: 3 bytes.
2024-02-23 22:05:15.3944 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:05:15.4170 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:05:15.4170 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:05:15.4170 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:05:15.4170 Sending payload: 64 bytes.
2024-02-23 22:05:23.0898 Connection id "0HN1KI3JO7SF2" accepted.
2024-02-23 22:05:23.0898 Connection id "0HN1KI3JO7SF2" started.
2024-02-23 22:05:23.0898 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65
2024-02-23 22:05:23.0898 All hosts are allowed.
2024-02-23 22:05:23.0898 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 22:05:23.0898 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 22:05:23.0898 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:05:23.0898 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:05:23.0898 The request has an origin header: 'http://localhost:5107'.
2024-02-23 22:05:23.0898 CORS policy execution failed.
2024-02-23 22:05:23.0898 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 22:05:23.0898 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:05:23.1065 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:05:23.1065 Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-02-23 22:05:23.1387 AuthenticationScheme: Bearer was challenged.
2024-02-23 22:05:23.1387 Connection id "0HN1KI3JO7SF2" completed keep alive response.
2024-02-23 22:05:23.1387 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65 - 401 0 - 47.0232ms
2024-02-23 22:05:23.1387 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000001": started reading request body.
2024-02-23 22:05:23.1387 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000001": done reading request body.
2024-02-23 22:05:31.0148 Sent a ping message to the client.
2024-02-23 22:05:31.0148 Sending payload: 11 bytes.
2024-02-23 22:05:31.2581 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:05:44.2746 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65
2024-02-23 22:05:44.2746 All hosts are allowed.
2024-02-23 22:05:44.2746 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 22:05:44.2813 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 22:05:44.2813 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:05:44.2813 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:05:44.2813 The request has an origin header: 'http://localhost:5107'.
2024-02-23 22:05:44.2813 CORS policy execution failed.
2024-02-23 22:05:44.2813 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 22:05:45.0139 Successfully validated the token.
2024-02-23 22:05:45.0139 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:05:45.0139 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:05:45.0139 Authorization was successful.
2024-02-23 22:05:45.0282 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:05:45.1527 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 22:05:45.1580 Execution plan of authorization filters (in the following order): None
2024-02-23 22:05:45.1580 Execution plan of resource filters (in the following order): None
2024-02-23 22:05:45.1580 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 22:05:45.1580 Execution plan of exception filters (in the following order): None
2024-02-23 22:05:45.1580 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 22:05:45.1580 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:05:45.2677 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:05:45.2840 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:05:45.2944 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 22:05:45.2944 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 22:05:45.3330 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000002": started reading request body.
2024-02-23 22:05:45.3330 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000002": done reading request body.
2024-02-23 22:05:45.3818 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 22:05:45.3818 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:05:45.3818 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:05:45.3818 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:05:45.4128 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:05:45.4256 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:05:45.4256 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:05:45.4256 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:05:45.4256 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:05:45.4256 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:05:45.4631 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 22:05:45.4631 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 22:05:46.2395 An 'IServiceProvider' was created for internal use by Entity Framework.
2024-02-23 22:05:47.0063 Sent a ping message to the client.
2024-02-23 22:05:47.0063 Sending payload: 11 bytes.
2024-02-23 22:05:47.0063 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:05:48.1864 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:48.5654 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:48.5654 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:48.5654 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.1634 No relationship from 'Chat' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Receiver', 'Sender'} that could be matched with the properties on the other entity type - {'Chats', 'ChatsReceived'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.1634 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.1634 No relationship from 'User' to 'Chat' has been configured by convention because there are multiple properties on one entity type - {'Chats', 'ChatsReceived'} that could be matched with the properties on the other entity type - {'Receiver', 'Sender'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.1989 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.2689 No relationship from 'BlockedUser' to 'User' has been configured by convention because there are multiple properties on one entity type - {'BlockUser', 'User'} that could be matched with the properties on the other entity type - {'BlockedByUsers', 'BlockedUsers'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:49.2689 No relationship from 'User' to 'BlockedUser' has been configured by convention because there are multiple properties on one entity type - {'BlockedByUsers', 'BlockedUsers'} that could be matched with the properties on the other entity type - {'BlockUser', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2024-02-23 22:05:51.5918 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 22:05:51.8923 Compiling query expression: 
'DbSet<BlockedUser>()
    .Where(x => !(x.IsBlockedInGroup) && x.BlockedById == __userId_0 && x.BlockedUserId == __model_ReceiverId_1 || x.BlockedById == __model_ReceiverId_1 && x.BlockedUserId == __userId_0)'
2024-02-23 22:05:52.6875 Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<BlockedUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: BlockedUser.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: BlockedUser.BlockedById (long) Required FK Index, 1], [Property: BlockedUser.BlockedUserId (long) Required FK Index, 2], [Property: BlockedUser.CreatedBy (long) Required, 3], [Property: BlockedUser.CreatedDate (DateTime) Required, 4], [Property: BlockedUser.GroupId (long?) FK Index, 5], [Property: BlockedUser.IsActive (bool) Required, 6], [Property: BlockedUser.IsBlockedInGroup (bool) Required, 7], [Property: BlockedUser.IsDeleted (bool) Required, 8], [Property: BlockedUser.UpdatedBy (long?), 9], [Property: BlockedUser.UpdatedDate (DateTime?), 10] }
        SELECT b.Id, b.BlockedById, b.BlockedUserId, b.CreatedBy, b.CreatedDate, b.GroupId, b.IsActive, b.IsBlockedInGroup, b.IsDeleted, b.UpdatedBy, b.UpdatedDate
        FROM BlockedUsers AS b
        WHERE Not(b.IsBlockedInGroup) && (((b.BlockedById == @__userId_0) && (b.BlockedUserId == @__model_ReceiverId_1)) || ((b.BlockedById == @__model_ReceiverId_1) && (b.BlockedUserId == @__userId_0)))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, BlockedUser>, 
    UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
    False, 
    False, 
    True
)'
2024-02-23 22:05:52.8777 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:05:52.8852 Creating DbConnection.
2024-02-23 22:05:53.0563 Created DbConnection. (163ms).
2024-02-23 22:05:53.0891 Created DbCommand for 'ExecuteReader' (206ms).
2024-02-23 22:05:53.1174 Initialized DbCommand for 'ExecuteReader' (249ms).
2024-02-23 22:05:53.1296 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:54.3277 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:54.3740 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:05:54.6182 Executed DbCommand (239ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:05:54.6759 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:54.7092 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 67ms reading results.
2024-02-23 22:05:54.7092 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:54.7455 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (22ms).
2024-02-23 22:05:54.9860 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:05:55.3198 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:05:55.3352 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:05:55.3460 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:05:55.4009 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 22:05:55.6955 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:55.6955 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:55.7134 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:05:55.7134 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:05:55.7134 Initialized DbCommand for 'ExecuteReader' (4ms).
2024-02-23 22:05:55.7134 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:05:55.7925 Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:05:55.8437 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 22:05:55.8759 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:55.8759 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 83ms reading results.
2024-02-23 22:05:55.8842 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:55.8842 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:05:55.9333 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:05:55.9442 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 22:05:55.9760 Compiling query expression: 
'DbSet<Chat>()
    .Include(x => x.Sender)
    .Include(x => x.Receiver)
    .Where(x => x.Id == __com_Id_0)
    .Select(x => new ChatNotificationDto{ 
        Id = x.Id, 
        SenderId = x.SenderId, 
        SenderName = x.Sender.Name, 
        ReceiverId = x.ReceiverId, 
        ReceiverName = x.Receiver.Name, 
        Message = x.Message, 
        Attachments = x.ChatAttachments
            .Select(att => new ChatAttachmentNoticationDto{ 
                Id = att.Id, 
                MediaType = att.MediaType, 
                Name = att.Name, 
                AttachmentUrl = att.AttachmentUrl, 
                ChatId = att.ChatId 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()'
2024-02-23 22:05:56.4599 Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ChatNotificationDto>(
    asyncEnumerable: new SingleQueryingEnumerable<ChatNotificationDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
                11 -> 11
                12 -> 12
            SELECT t.Id, t.SenderId, t.Name, t.ReceiverId, t.Name0, t.Message, t.Id0, t.Id1, c0.Id, c0.MediaType, c0.Name, c0.AttachmentUrl, c0.ChatId
            FROM 
            (
                SELECT TOP(1) c.Id, c.SenderId, u.Name, c.ReceiverId, u0.Name AS Name0, c.Message, u.Id AS Id0, u0.Id AS Id1
                FROM Chats AS c
                INNER JOIN Users AS u ON c.SenderId == u.Id
                INNER JOIN Users AS u0 ON c.ReceiverId == u0.Id
                WHERE c.Id == @__com_Id_0
            ) AS t
            LEFT JOIN ChatAttachments AS c0 ON t.Id == c0.ChatId
            ORDER BY t.Id ASC, t.Id0 ASC, t.Id1 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ChatNotificationDto>, 
        UserInteraction_Infrastructure.Data.UserInteractionDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-02-23 22:05:56.4781 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:05:56.4781 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:05:56.4781 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:05:56.4781 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:56.4781 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:56.4781 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:05:56.5096 Executed DbCommand (21ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:05:56.5346 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:56.5346 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 25ms reading results.
2024-02-23 22:05:56.5346 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:56.5346 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:05:56.5556 Sending payload: 163 bytes.
2024-02-23 22:05:56.5767 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11097.2413ms.
2024-02-23 22:05:56.5819 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:05:56.5819 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:05:56.5819 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:05:56.5819 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:05:56.5819 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:05:56.5819 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:05:56.5819 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:05:56.6065 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:05:56.6159 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 22:05:56.6278 No information found on request to perform content negotiation.
2024-02-23 22:05:56.6278 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 22:05:56.6278 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 22:05:56.6278 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 22:05:56.6278 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 22:05:56.6566 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:05:56.6566 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:05:56.6566 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:05:56.6673 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 11498.3713ms
2024-02-23 22:05:56.6673 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:05:56.6673 Connection id "0HN1KI3JO7SF2" completed keep alive response.
2024-02-23 22:05:56.6793 'UserInteractionDbContext' disposed.
2024-02-23 22:05:56.6943 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:05:56.6943 Disposed connection to database '' on server '' (3ms).
2024-02-23 22:05:56.6943 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65 - 200 - application/json;+charset=utf-8 12425.0599ms
2024-02-23 22:06:02.0187 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:06:03.0120 Sent a ping message to the client.
2024-02-23 22:06:03.0120 Sending payload: 11 bytes.
2024-02-23 22:06:17.2507 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:06:19.0122 Sent a ping message to the client.
2024-02-23 22:06:19.0122 Sending payload: 11 bytes.
2024-02-23 22:06:33.2432 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:06:35.0114 Sent a ping message to the client.
2024-02-23 22:06:35.0114 Sending payload: 11 bytes.
2024-02-23 22:06:48.2517 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:06:51.0110 Sent a ping message to the client.
2024-02-23 22:06:51.0110 Sending payload: 11 bytes.
2024-02-23 22:07:04.2588 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:07:07.0158 Sent a ping message to the client.
2024-02-23 22:07:07.0158 Sending payload: 11 bytes.
2024-02-23 22:07:15.9285 Connection id "0HN1KI3JO7SF1" received FIN.
2024-02-23 22:07:15.9285 Waiting for the application to finish sending data.
2024-02-23 22:07:15.9285 Connection id "0HN1KI3JO7SF1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:07:15.9285 OnConnectedAsync ending.
2024-02-23 22:07:15.9285 Connection id "0HN1KI3JO7SF1" disconnecting.
2024-02-23 22:07:15.9285 Disposing connection 7v4rv-ELG80UoPgX9PqQ-Q.
2024-02-23 22:07:15.9389 Socket closed.
2024-02-23 22:07:15.9678 Waiting for WebSockets transport to complete.
2024-02-23 22:07:15.9678 WebSockets transport complete.
2024-02-23 22:07:15.9678 Removing connection xGwxSkmsVsWOXg4aDMk1Zw from the list of connections.
2024-02-23 22:07:15.9678 Executed endpoint '/ConnectionHub'
2024-02-23 22:07:15.9707 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=xGwxSkmsVsWOXg4aDMk1Zw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 120628.4442ms
2024-02-23 22:07:15.9707 Connection id "0HN1KI3JO7SF1" stopped.
2024-02-23 22:07:18.0151 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 22:07:18.0151 All hosts are allowed.
2024-02-23 22:07:18.0151 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0151 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0151 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:18.0151 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:18.0151 CORS policy execution successful.
2024-02-23 22:07:18.0151 The request is a preflight request.
2024-02-23 22:07:18.0151 Connection id "0HN1KI3JO7SET" completed keep alive response.
2024-02-23 22:07:18.0151 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 1.8683ms
2024-02-23 22:07:18.0151 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 22:07:18.0235 All hosts are allowed.
2024-02-23 22:07:18.0235 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0235 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0235 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:18.0235 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:18.0235 CORS policy execution successful.
2024-02-23 22:07:18.0235 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 22:07:18.0235 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0235 New connection pXdY2TqVB3-GUHnY5umUgw created.
2024-02-23 22:07:18.0235 Sending negotiation response.
2024-02-23 22:07:18.0235 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:18.0235 Connection id "0HN1KI3JO7SEU" completed keep alive response.
2024-02-23 22:07:18.0235 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 7.2726ms
2024-02-23 22:07:18.0838 Connection id "0HN1KI3JO7SF3" accepted.
2024-02-23 22:07:18.0838 Connection id "0HN1KI3JO7SF3" started.
2024-02-23 22:07:18.0838 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=rRQUtjGZiBa1cXUa2IVikw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:07:18.0838 All hosts are allowed.
2024-02-23 22:07:18.0838 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:07:18.0838 Request matched endpoint '/ConnectionHub'
2024-02-23 22:07:18.0838 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:18.0838 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:18.0838 CORS policy execution successful.
2024-02-23 22:07:18.0838 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:07:18.0838 Executing endpoint '/ConnectionHub'
2024-02-23 22:07:18.0838 Establishing new connection.
2024-02-23 22:07:18.0838 OnConnectedAsync started.
2024-02-23 22:07:18.0838 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:07:18.1030 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:07:18.1030 Found protocol implementation for requested protocol: json.
2024-02-23 22:07:18.1030 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:07:18.1030 Sending payload: 3 bytes.
2024-02-23 22:07:18.1142 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:07:18.1142 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:07:18.1142 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:07:18.1142 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:07:18.1142 Sending payload: 64 bytes.
2024-02-23 22:07:32.3054 Connection id "0HN1KI3JO7SF3" received FIN.
2024-02-23 22:07:32.3054 Connection id "0HN1KI3JO7SF3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-02-23 22:07:32.3054 Connection id "0HN1KI3JO7SF3" disconnecting.
2024-02-23 22:07:32.3054 Waiting for the application to finish sending data.
2024-02-23 22:07:32.3054 Socket closed.
2024-02-23 22:07:32.3054 Disposing connection pXdY2TqVB3-GUHnY5umUgw.
2024-02-23 22:07:32.3054 OnConnectedAsync ending.
2024-02-23 22:07:32.3054 Waiting for application to complete.
2024-02-23 22:07:32.3054 Application complete.
2024-02-23 22:07:32.3054 Removing connection rRQUtjGZiBa1cXUa2IVikw from the list of connections.
2024-02-23 22:07:32.3054 Executed endpoint '/ConnectionHub'
2024-02-23 22:07:32.3164 Request finished HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=rRQUtjGZiBa1cXUa2IVikw&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - - - 101 - - 14231.1429ms
2024-02-23 22:07:32.3164 Connection id "0HN1KI3JO7SF3" stopped.
2024-02-23 22:07:33.0179 Request starting HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - -
2024-02-23 22:07:33.0207 All hosts are allowed.
2024-02-23 22:07:33.0207 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0207 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0207 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:33.0207 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:33.0207 CORS policy execution successful.
2024-02-23 22:07:33.0207 The request is a preflight request.
2024-02-23 22:07:33.0207 Connection id "0HN1KI3JO7SET" completed keep alive response.
2024-02-23 22:07:33.0207 Request finished HTTP/1.1 OPTIONS http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - - - 204 - - 4.2284ms
2024-02-23 22:07:33.0345 Request starting HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0
2024-02-23 22:07:33.0345 All hosts are allowed.
2024-02-23 22:07:33.0345 1 candidate(s) found for the request path '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0345 Request matched endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0345 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:33.0345 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:33.0345 CORS policy execution successful.
2024-02-23 22:07:33.0345 Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-02-23 22:07:33.0345 Executing endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0345 New connection 1PctGfEjRwBA-xXo3lvzrQ created.
2024-02-23 22:07:33.0345 Sending negotiation response.
2024-02-23 22:07:33.0345 Executed endpoint '/ConnectionHub/negotiate'
2024-02-23 22:07:33.0345 Connection id "0HN1KI3JO7SEU" completed keep alive response.
2024-02-23 22:07:33.0345 Request finished HTTP/1.1 POST http://localhost:5107/ConnectionHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 7.2480ms
2024-02-23 22:07:33.1305 Connection id "0HN1KI3JO7SF4" accepted.
2024-02-23 22:07:33.1407 Connection id "0HN1KI3JO7SF4" started.
2024-02-23 22:07:33.1407 Request starting HTTP/1.1 GET http://localhost:5107/ConnectionHub?id=Fb6c60vJGEtDU8cpGXz-SQ&access_token=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVGVzdEBnbWFpbC5jb20iLCJqdGkiOiIzYzY5ZDA4MS0zNWI0LTRjYTctODk2OS1jY2JlMWUzYzUwMmYiLCJVc2VySWQiOiIxIiwiZXhwIjoxNzA4NzE0NTc2LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjcxMDkiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUxMDAifQ.7Sb12YLFpnzUs8V5w_w62sKvKu05BmlzCuqqGJvuk6w - -
2024-02-23 22:07:33.1407 All hosts are allowed.
2024-02-23 22:07:33.1407 1 candidate(s) found for the request path '/ConnectionHub'
2024-02-23 22:07:33.1407 Request matched endpoint '/ConnectionHub'
2024-02-23 22:07:33.1407 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:33.1407 The request has an origin header: 'http://localhost:4200'.
2024-02-23 22:07:33.1407 CORS policy execution successful.
2024-02-23 22:07:33.1407 AuthenticationScheme: Bearer was not authenticated.
2024-02-23 22:07:33.1407 Executing endpoint '/ConnectionHub'
2024-02-23 22:07:33.1899 Establishing new connection.
2024-02-23 22:07:33.1899 OnConnectedAsync started.
2024-02-23 22:07:33.1899 Socket opened using Sub-Protocol: '(null)'.
2024-02-23 22:07:33.2121 Message received. Type: Text, size: 32, EndOfMessage: True.
2024-02-23 22:07:33.2121 Found protocol implementation for requested protocol: json.
2024-02-23 22:07:33.2121 Completed connection handshake. Using HubProtocol 'json'.
2024-02-23 22:07:33.2185 Sending payload: 3 bytes.
2024-02-23 22:07:33.2185 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:07:33.2514 Message received. Type: Text, size: 72, EndOfMessage: True.
2024-02-23 22:07:33.2514 Received hub invocation: InvocationMessage { InvocationId: "0", Target: "GetConnectionId", Arguments: [  ], StreamIds: [  ] }.
2024-02-23 22:07:33.2514 InvocationId 0: Sending result of type 'System.String'.
2024-02-23 22:07:33.2514 Sending payload: 64 bytes.
2024-02-23 22:07:39.8953 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65
2024-02-23 22:07:39.8953 All hosts are allowed.
2024-02-23 22:07:39.8953 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 22:07:39.8953 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 22:07:39.8953 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:07:39.8953 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:07:39.8953 The request has an origin header: 'http://localhost:5107'.
2024-02-23 22:07:39.8953 CORS policy execution failed.
2024-02-23 22:07:39.8953 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 22:07:39.8953 Successfully validated the token.
2024-02-23 22:07:39.8953 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:07:39.8953 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:07:39.8953 Authorization was successful.
2024-02-23 22:07:39.9079 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:07:39.9079 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 22:07:39.9079 Execution plan of authorization filters (in the following order): None
2024-02-23 22:07:39.9079 Execution plan of resource filters (in the following order): None
2024-02-23 22:07:39.9079 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 22:07:39.9079 Execution plan of exception filters (in the following order): None
2024-02-23 22:07:39.9079 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 22:07:39.9079 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:07:39.9079 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:07:39.9079 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:07:39.9079 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 22:07:39.9079 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 22:07:39.9079 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000003": started reading request body.
2024-02-23 22:07:39.9079 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000003": done reading request body.
2024-02-23 22:07:39.9079 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 22:07:39.9079 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:07:39.9079 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:07:39.9079 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:07:39.9079 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:07:39.9079 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:07:39.9079 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:07:39.9079 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:07:39.9079 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:07:39.9079 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:07:39.9079 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 22:07:39.9079 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 22:07:39.9741 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 22:07:40.0234 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:07:40.0234 Creating DbConnection.
2024-02-23 22:07:40.0234 Created DbConnection. (0ms).
2024-02-23 22:07:40.0234 Created DbCommand for 'ExecuteReader' (1ms).
2024-02-23 22:07:40.0234 Initialized DbCommand for 'ExecuteReader' (1ms).
2024-02-23 22:07:40.0234 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0234 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0234 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:07:40.0582 Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:07:40.0582 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0582 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 22:07:40.0582 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0582 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:07:40.0715 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:07:40.0715 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:07:40.0715 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:07:40.0715 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:07:40.0715 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 22:07:40.0893 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0893 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.0893 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:07:40.0893 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:07:40.0893 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:07:40.0893 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:07:40.1133 Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:07:40.1152 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 22:07:40.1152 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1152 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 4ms reading results.
2024-02-23 22:07:40.1152 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1152 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:07:40.1152 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:07:40.1152 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 22:07:40.1152 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:07:40.1152 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:07:40.1152 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:07:40.1152 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1152 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1152 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:07:40.1640 Executed DbCommand (22ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:07:40.1640 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1640 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 1ms reading results.
2024-02-23 22:07:40.1640 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1640 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:07:40.1640 Sending payload: 163 bytes.
2024-02-23 22:07:40.1640 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 250.3771ms.
2024-02-23 22:07:40.1640 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:07:40.1640 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:07:40.1640 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:07:40.1640 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:07:40.1640 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:07:40.1640 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:07:40.1640 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:07:40.1640 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:07:40.1640 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 22:07:40.1640 No information found on request to perform content negotiation.
2024-02-23 22:07:40.1640 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 22:07:40.1640 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 22:07:40.1640 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 22:07:40.1640 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 22:07:40.1640 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:07:40.1640 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:07:40.1640 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:07:40.1640 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 262.2249ms
2024-02-23 22:07:40.1640 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:07:40.1640 Connection id "0HN1KI3JO7SF2" completed keep alive response.
2024-02-23 22:07:40.1640 'UserInteractionDbContext' disposed.
2024-02-23 22:07:40.1640 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:07:40.1640 Disposed connection to database '' on server '' (0ms).
2024-02-23 22:07:40.1640 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65 - 200 - application/json;+charset=utf-8 281.4665ms
2024-02-23 22:07:48.2803 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:07:49.0135 Sent a ping message to the client.
2024-02-23 22:07:49.0135 Sending payload: 11 bytes.
2024-02-23 22:08:03.2885 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:08:05.0064 Sent a ping message to the client.
2024-02-23 22:08:05.0064 Sending payload: 11 bytes.
2024-02-23 22:08:18.3037 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:08:20.0151 Sent a ping message to the client.
2024-02-23 22:08:20.0151 Sending payload: 11 bytes.
2024-02-23 22:08:34.2551 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:08:36.0118 Sent a ping message to the client.
2024-02-23 22:08:36.0118 Sending payload: 11 bytes.
2024-02-23 22:08:50.2644 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:08:52.0075 Sent a ping message to the client.
2024-02-23 22:08:52.0075 Sending payload: 11 bytes.
2024-02-23 22:08:56.3266 Request starting HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65
2024-02-23 22:08:56.3272 All hosts are allowed.
2024-02-23 22:08:56.3272 1 candidate(s) found for the request path '/api/Chat/Add'
2024-02-23 22:08:56.3272 Endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)' with route pattern 'api/Chat/Add' is valid for the request path '/api/Chat/Add'
2024-02-23 22:08:56.3272 Request matched endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:08:56.3272 Static files was skipped as the request already matched an endpoint.
2024-02-23 22:08:56.3272 The request has an origin header: 'http://localhost:5107'.
2024-02-23 22:08:56.3272 CORS policy execution failed.
2024-02-23 22:08:56.3272 Request origin http://localhost:5107 does not have permission to access the resource.
2024-02-23 22:08:56.3272 Successfully validated the token.
2024-02-23 22:08:56.3272 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:08:56.3272 AuthenticationScheme: Bearer was successfully authenticated.
2024-02-23 22:08:56.3272 Authorization was successful.
2024-02-23 22:08:56.3272 Executing endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:08:56.3272 Route matched with {action = "Add", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(UserInteraction_Application.Dtos.Chat.AddUpdateChatDto) on controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi).
2024-02-23 22:08:56.3272 Execution plan of authorization filters (in the following order): None
2024-02-23 22:08:56.3272 Execution plan of resource filters (in the following order): None
2024-02-23 22:08:56.3272 Execution plan of action filters (in the following order): Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000), Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000), CommonService.Filters.TokenToUserIdActionFilter
2024-02-23 22:08:56.3272 Execution plan of exception filters (in the following order): None
2024-02-23 22:08:56.3272 Execution plan of result filters (in the following order): Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)
2024-02-23 22:08:56.3272 Executing controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:08:56.3272 Executed controller factory for controller UserInteraction_WebApi.Controllers.ChatController (UserInteraction_WebApi)
2024-02-23 22:08:56.3272 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:08:56.3445 Attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' using the name '' in request data ...
2024-02-23 22:08:56.3445 Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-02-23 22:08:56.3445 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000004": started reading request body.
2024-02-23 22:08:56.3445 Connection id "0HN1KI3JO7SF2", Request id "0HN1KI3JO7SF2:00000004": done reading request body.
2024-02-23 22:08:56.3445 JSON input formatter succeeded, deserializing to type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'
2024-02-23 22:08:56.3445 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:08:56.3445 Done attempting to bind parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:08:56.3445 Attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto' ...
2024-02-23 22:08:56.3445 Done attempting to validate the bound parameter 'model' of type 'UserInteraction_Application.Dtos.Chat.AddUpdateChatDto'.
2024-02-23 22:08:56.3445 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:08:56.3445 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:08:56.3445 Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:08:56.3445 Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:08:56.3445 Action Filter: Before executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:08:56.3445 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) - Validation state: Valid
2024-02-23 22:08:56.3445 Executing action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) with arguments (UserInteraction_Application.Dtos.Chat.AddUpdateChatDto)
2024-02-23 22:08:56.7771 Entity Framework Core 7.0.0 initialized 'UserInteractionDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.0' with options: None
2024-02-23 22:08:56.7830 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:08:56.7830 Creating DbConnection.
2024-02-23 22:08:56.7830 Created DbConnection. (0ms).
2024-02-23 22:08:56.7830 Created DbCommand for 'ExecuteReader' (1ms).
2024-02-23 22:08:56.7830 Initialized DbCommand for 'ExecuteReader' (1ms).
2024-02-23 22:08:56.7830 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.7830 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.7830 Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:08:56.8290 Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int64), @__model_ReceiverId_1='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [b].[Id], [b].[BlockedById], [b].[BlockedUserId], [b].[CreatedBy], [b].[CreatedDate], [b].[GroupId], [b].[IsActive], [b].[IsBlockedInGroup], [b].[IsDeleted], [b].[UpdatedBy], [b].[UpdatedDate]
FROM [BlockedUsers] AS [b]
WHERE [b].[IsBlockedInGroup] = CAST(0 AS bit) AND (([b].[BlockedById] = @__userId_0 AND [b].[BlockedUserId] = @__model_ReceiverId_1) OR ([b].[BlockedById] = @__model_ReceiverId_1 AND [b].[BlockedUserId] = @__userId_0))
2024-02-23 22:08:56.8290 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.8290 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 22:08:56.8290 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.8290 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:08:56.8290 '"UserInteractionDbContext"' generated a temporary value for the property '"Id"."Chat"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:08:56.8290 Context 'UserInteractionDbContext' started tracking 'Chat' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:08:56.8290 SaveChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:08:56.8290 DetectChanges starting for 'UserInteractionDbContext'.
2024-02-23 22:08:56.8290 DetectChanges completed for 'UserInteractionDbContext'.
2024-02-23 22:08:56.8290 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.8290 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.8290 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:08:56.8290 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:08:56.8290 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:08:56.8290 Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:08:56.9496 Executed DbCommand (98ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Int64), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Chats] ([CreatedBy], [CreatedDate], [IsActive], [IsDeleted], [Message], [ReceiverId], [SenderId], [UpdatedBy], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-02-23 22:08:56.9496 The foreign key property 'Chat.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-02-23 22:08:56.9496 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.9496 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 22:08:56.9496 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.9496 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:08:56.9496 An entity of type 'Chat' tracked by 'UserInteractionDbContext' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-02-23 22:08:56.9496 SaveChanges completed for 'UserInteractionDbContext' with 1 entities written to the database.
2024-02-23 22:08:56.9496 Creating DbCommand for 'ExecuteReader'.
2024-02-23 22:08:56.9496 Created DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:08:56.9496 Initialized DbCommand for 'ExecuteReader' (0ms).
2024-02-23 22:08:56.9496 Opening connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.9496 Opened connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:56.9496 Executing DbCommand [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:08:57.0019 Executed DbCommand (32ms) [Parameters=[@__com_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[SenderId], [t].[Name], [t].[ReceiverId], [t].[Name0], [t].[Message], [t].[Id0], [t].[Id1], [c0].[Id], [c0].[MediaType], [c0].[Name], [c0].[AttachmentUrl], [c0].[ChatId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[SenderId], [u].[Name], [c].[ReceiverId], [u0].[Name] AS [Name0], [c].[Message], [u].[Id] AS [Id0], [u0].[Id] AS [Id1]
    FROM [Chats] AS [c]
    INNER JOIN [Users] AS [u] ON [c].[SenderId] = [u].[Id]
    INNER JOIN [Users] AS [u0] ON [c].[ReceiverId] = [u0].[Id]
    WHERE [c].[Id] = @__com_Id_0
) AS [t]
LEFT JOIN [ChatAttachments] AS [c0] ON [t].[Id] = [c0].[ChatId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2024-02-23 22:08:57.0019 Closing data reader to 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:57.0019 A data reader for 'UserInteraction2' on server 'LHR-TCH-UKHAN' is being disposed after spending 0ms reading results.
2024-02-23 22:08:57.0019 Closing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:57.0019 Closed connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN' (0ms).
2024-02-23 22:08:57.0019 Sending payload: 163 bytes.
2024-02-23 22:08:57.0019 Executed action method UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 655.2197ms.
2024-02-23 22:08:57.0019 Action Filter: After executing OnActionExecutionAsync on filter CommonService.Filters.TokenToUserIdActionFilter.
2024-02-23 22:08:57.0019 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:08:57.0019 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2024-02-23 22:08:57.0019 Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:08:57.0019 Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2024-02-23 22:08:57.0019 Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:08:57.0019 Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:08:57.0019 Before executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:08:57.0019 List of registered output formatters, in the following order: Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter, Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter
2024-02-23 22:08:57.0019 No information found on request to perform content negotiation.
2024-02-23 22:08:57.0019 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-02-23 22:08:57.0019 Attempting to select the first formatter in the output formatters list which can write the result.
2024-02-23 22:08:57.0019 Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-02-23 22:08:57.0019 Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-02-23 22:08:57.0019 After executing action result Microsoft.AspNetCore.Mvc.OkObjectResult.
2024-02-23 22:08:57.0019 Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:08:57.0019 Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2024-02-23 22:08:57.0019 Executed action UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi) in 663.8126ms
2024-02-23 22:08:57.0019 Executed endpoint 'UserInteraction_WebApi.Controllers.ChatController.Add (UserInteraction_WebApi)'
2024-02-23 22:08:57.0136 Connection id "0HN1KI3JO7SF2" completed keep alive response.
2024-02-23 22:08:57.0136 'UserInteractionDbContext' disposed.
2024-02-23 22:08:57.0136 Disposing connection to database 'UserInteraction2' on server 'LHR-TCH-UKHAN'.
2024-02-23 22:08:57.0136 Disposed connection to database '' on server '' (0ms).
2024-02-23 22:08:57.0136 Request finished HTTP/1.1 POST http://localhost:5107/api/Chat/Add application/json 65 - 200 - application/json;+charset=utf-8 687.4714ms
2024-02-23 22:09:05.2693 Message received. Type: Text, size: 11, EndOfMessage: True.
2024-02-23 22:09:08.0217 Sent a ping message to the client.
2024-02-23 22:09:08.0217 Sending payload: 11 bytes.
